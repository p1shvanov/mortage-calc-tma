const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LineChart-6bek8jR5.js","assets/vendor-telegram-DYpFzjZD.js","assets/vendor-react-BsEvrc09.js","assets/vendor-charts-C-oi8yqo.js","assets/index-BJ9Ph6PL.js","assets/index-Csy9egBs.css","assets/PieChart-7-HVqyyw.js","assets/BarChart-HRho7MYo.js","assets/DoughnutChart-DQYn0ERU.js","assets/RadarChart-CuwXYUhc.js"])))=>i.map(i=>d[i]);
import{j as e,S as a,_ as t,p as r,q as l,s,C as n,T as i,n as o,y as d,k as c,u as h,v as m,w as u,x as b,z as y,D as x,E as j,l as g}from"./vendor-telegram-DYpFzjZD.js";import{u as f,a as p,_ as P}from"./index-BJ9Ph6PL.js";import{a as _,d as C}from"./vendor-react-BsEvrc09.js";import{P as v}from"./Page-D19Mk31s.js";const T=_.lazy((()=>P((()=>import("./LineChart-6bek8jR5.js")),__vite__mapDeps([0,1,2,3,4,5])))),w=_.lazy((()=>P((()=>import("./PieChart-7-HVqyyw.js")),__vite__mapDeps([6,1,2,3,4,5])))),M=_.lazy((()=>P((()=>import("./BarChart-HRho7MYo.js")),__vite__mapDeps([7,1,2,3,4,5])))),k=_.lazy((()=>P((()=>import("./DoughnutChart-DQYn0ERU.js")),__vite__mapDeps([8,1,2,3,4,5])))),I=_.lazy((()=>P((()=>import("./RadarChart-CuwXYUhc.js")),__vite__mapDeps([9,1,2,3,4,5])))),S=_.memo((()=>{const{t:t}=f(),{amortizationResult:r}=p();if(!r||0===r.schedule.length)return null;const l=_.useMemo((()=>r.schedule.map((e=>{const a=new Date(e.date);return`${(a.getMonth()+1).toString().padStart(2,"0")}/${a.getFullYear().toString().slice(2)}`}))),[r.schedule.length]),s=_.useMemo((()=>r.schedule.map((e=>e.principal))),[r.schedule.length]),n=_.useMemo((()=>r.schedule.map((e=>e.interest))),[r.schedule.length]),i=_.useMemo((()=>r.schedule.map((e=>e.balance))),[r.schedule.length]),o=_.useMemo((()=>r.schedule.map((e=>({hasExtraPayment:!!e.extraPayment&&e.extraPayment>0,amount:e.extraPayment||0,type:e.extraPaymentType||"",isRegular:e.isRegularPayment||!1})))),[r.schedule]),d=_.useMemo((()=>({labels:l,datasets:[{label:t("principal"),data:s,borderColor:"#4bc0c0",backgroundColor:"#4bc0c033",fill:!0,yAxisID:"y"},{label:t("interest"),data:n,borderColor:"#ff6384",backgroundColor:"#ff638433",fill:!0,yAxisID:"y"},{label:t("balance"),data:i,borderColor:"#36a2eb",backgroundColor:"#36a2eb33",borderDash:[5,5],fill:!1,yAxisID:"y1"}]})),[s.length,i.length,n.length]),c=_.useMemo((()=>{const e=s.reduce(((e,a)=>e+a),0),a=r.summary.newTotalInterest;return{labels:[t("principal"),t("interest")],datasets:[{data:[e,a],backgroundColor:["#4bc0c0","#ff6384"],borderColor:["#4bc0c0","#ff6384"],borderWidth:1}]}}),[s,r.summary.newTotalInterest,t]),h=_.useMemo((()=>{if(!r.schedule.some((e=>e.extraPayment&&e.extraPayment>0)))return null;const e=r.summary.originalTotalInterest,a=r.summary.newTotalInterest,l=e-a;return{labels:[t("newTotalInterest"),t("interestSaved")],datasets:[{data:[a,l],backgroundColor:["#36a2eb","#4bc0c0"],borderColor:["#36a2eb","#4bc0c0"],borderWidth:1}]}}),[r,t]),m=_.useMemo((()=>{const e=Math.max(1,Math.floor(l.length/12)),a=l.filter(((a,t)=>t%e==0)),r=s.filter(((a,t)=>t%e==0)),i=n.filter(((a,t)=>t%e==0));return{labels:a,datasets:[{label:t("principal"),data:r,backgroundColor:"#4bc0c0"},{label:t("interest"),data:i,backgroundColor:"#ff6384"}]}}),[l,s,n,t]),u=_.useMemo((()=>{const e=s.reduce(((e,a)=>e+a),0),a=r.summary.newTotalInterest,l=r.schedule.reduce(((e,a)=>e+(a.extraPayment||0)),0);return{labels:[t("principal"),t("interest"),t("extraPayment")],datasets:[{data:[e,a,l],backgroundColor:["#4bc0c0","#ff6384","#ffcd56"],borderColor:["#4bc0c0","#ff6384","#ffcd56"],borderWidth:1,hoverOffset:10}]}}),[s,r,t]),b=_.useMemo((()=>{if(!r.schedule.some((e=>e.extraPayment&&e.extraPayment>0)))return null;const e=r.summary.originalTerm,a=r.summary.newTerm,l=r.summary.originalTotalInterest,s=r.summary.newTotalInterest,n=r.summary.originalMonthlyPayment,i=a/e*100,o=s/l*100,d=r.summary.finalMonthlyPayment/n*100;return{labels:[t("loanTerm"),t("totalInterest"),t("monthlyPayment")],datasets:[{label:t("original"),data:[100,100,100],backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgb(255, 99, 132)",pointBackgroundColor:"rgb(255, 99, 132)"},{label:t("withEarlyPayments"),data:[i,o,d],backgroundColor:"rgba(54, 162, 235, 0.2)",borderColor:"rgb(54, 162, 235)",pointBackgroundColor:"rgb(54, 162, 235)"}]}}),[r,t]);return e.jsxs(e.Fragment,{children:[e.jsx(_.Suspense,{fallback:e.jsx(a,{visible:!0}),children:e.jsx(T,{data:d,title:t("amortizationSchedule"),extraPaymentInfo:o})}),e.jsx(_.Suspense,{fallback:e.jsx(a,{visible:!0}),children:e.jsx(M,{data:m,title:t("monthlyPaymentBreakdown")})}),e.jsx(_.Suspense,{fallback:e.jsx(a,{visible:!0}),children:e.jsx(w,{data:c,title:t("paymentDistribution")})}),e.jsx(_.Suspense,{fallback:e.jsx(a,{visible:!0}),children:e.jsx(k,{data:u,title:t("totalPaymentBreakdown")})}),h&&e.jsx(_.Suspense,{fallback:e.jsx(a,{visible:!0}),children:e.jsx(w,{data:h,title:t("interestSavings")})}),b&&e.jsx(_.Suspense,{fallback:e.jsx(a,{visible:!0}),children:e.jsx(I,{data:b,title:t("mortgageComparison")})})]})})),R=a=>{var n=t({},r(a));return e.jsx("svg",l(s({width:"28",height:"28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),{children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.1 4.4a9.51 9.51 0 0 0-8.7 9.41 9.53 9.53 0 0 0 9.6 9.46c5 0 9.1-3.76 9.55-8.56h-7.29c-.5 0-.96 0-1.33-.05a2.04 2.04 0 0 1-1.23-.55c-.36-.36-.5-.8-.55-1.22-.05-.38-.05-.84-.05-1.34V4.4Zm1.8 0v7.1a9.97 9.97 0 0 0 .08 1.34l.19.04c.24.03.58.03 1.15.03h7.23A9.53 9.53 0 0 0 14.9 4.4Zm.06 8.43h.01Zm.02.01v.01Zm-12.38.97C2.6 7.6 7.72 2.56 14 2.56S25.4 7.59 25.4 13.8c0 6.23-5.12 11.26-11.4 11.26S2.6 20.04 2.6 13.81Z",fill:"currentColor"})}))},D={tableContainer:"_tableContainer_ln8oj_1",table:"_table_ln8oj_1",tableHead:"_tableHead_ln8oj_13",tableHeader:"_tableHeader_ln8oj_20",tableCell:"_tableCell_ln8oj_27",tableRow:"_tableRow_ln8oj_34",highlight:"_highlight_ln8oj_38",tabPanel:"_tabPanel_ln8oj_42"},E=({children:a,className:t})=>e.jsx("div",{className:`${D.tableContainer} ${t||""}`,children:e.jsx("table",{className:D.table,children:a})}),O=({children:a})=>e.jsx("thead",{className:D.tableHead,children:a}),z=({children:a})=>e.jsx("tbody",{className:D.tableBody,children:a}),$=({children:a,highlight:t,style:r})=>e.jsx("tr",{className:`${D.tableRow} ${t?D.highlight:""}`,style:r,children:a}),A=({children:a,header:t})=>t?e.jsx("th",{className:D.tableHeader,children:e.jsx(n,{weight:"1",children:a})}):e.jsx("td",{className:D.tableCell,children:e.jsx(i,{weight:"3",children:a})}),N=_.lazy((()=>P((()=>import("./PieChart-7-HVqyyw.js")),__vite__mapDeps([6,1,2,3,4,5])))),B=_.memo((()=>{const{height:t}=o(d),{t:r,formatCurrency:l,formatDate:s,formatNumber:n}=f(),{amortizationResult:i}=p(),[b,y]=_.useState(1),[x,j]=_.useState(null),[g,P]=_.useState(!1);if(!i||0===i.schedule.length)return null;const C=i.schedule,v=_.useMemo((()=>"number"==typeof x?i.schedule[x]:null),[x]),T=_.useMemo((()=>v?{labels:[r("principal"),r("interest")],datasets:[{data:[v.principal,v.interest],backgroundColor:["rgba(75, 192, 192, 0.6)","rgba(255, 99, 132, 0.6)"],borderColor:["rgba(75, 192, 192, 1)","rgba(255, 99, 132, 1)"],borderWidth:1}]}:null),[x]),w=Math.ceil(C.length/12),M=12*(b-1),k=Math.min(M+12,C.length),I=C.slice(M,k);return e.jsxs(c,{children:[T&&e.jsx(h,{onOpenChange:e=>{e||j(null)},open:g,nested:!0,style:{height:.6*t},children:e.jsx(_.Suspense,{fallback:e.jsx(a,{visible:!0}),children:e.jsx(N,{data:T,title:r("paymentBreakdown")})})}),e.jsx(c.Header,{large:!0,children:r("showingPayments",{from:M+1,to:k,total:C.length})}),e.jsxs(E,{children:[e.jsx(O,{children:e.jsxs($,{children:[e.jsx(A,{header:!0,children:" "}),e.jsx(A,{header:!0,children:r("month")}),e.jsx(A,{header:!0,children:r("date")}),e.jsx(A,{header:!0,children:r("payment")}),e.jsx(A,{header:!0,children:r("principal")}),e.jsx(A,{header:!0,children:r("interest")}),e.jsx(A,{header:!0,children:r("extraPayment")}),e.jsx(A,{header:!0,children:r("balance")})]})}),e.jsx(z,{children:I.map(((a,t)=>e.jsxs($,{highlight:Boolean(a.extraPayment),style:a.isRegularPayment?{backgroundColor:"rgba(75, 192, 192, 0.1)"}:void 0,children:[e.jsx(A,{children:e.jsx(m,{size:"s",onClick:()=>(e=>{j(e),P(!0)})(M+t),children:e.jsx(R,{})})}),e.jsx(A,{children:n(a.month)}),e.jsx(A,{children:s(a.date)}),e.jsx(A,{children:l(a.payment)}),e.jsx(A,{children:l(a.principal)}),e.jsx(A,{children:l(a.interest)}),e.jsx(A,{children:a.extraPayment?e.jsxs("span",{children:[l(a.extraPayment),a.isRegularPayment&&e.jsx("span",{title:r("regularPayment"),style:{marginLeft:"4px",color:"rgba(75, 192, 192, 1)"},children:"*"})]}):a.isRegularPayment&&a.regularPaymentMessage?e.jsx("span",{title:a.regularPaymentMessage,style:{color:"rgba(255, 99, 132, 0.8)"},children:r("insufficientPayment")}):"-"}),e.jsx(A,{children:l(a.balance)})]},a.month)))})]}),e.jsx(c.Footer,{centered:!0,children:e.jsx(u,{siblingCount:0,boundaryCount:1,page:b,count:w,onChange:(e,a)=>{y(a)}})})]})})),L=_.memo((()=>{const{t:a,formatCurrency:t,formatDate:r}=f(),{mortgageResults:l,amortizationResult:s}=p();if(!l)return null;const n=_.useMemo((()=>!(!s||!s.schedule)&&s.schedule.some((e=>void 0!==e.extraPayment&&e.extraPayment>0))),[s]),{monthlyPayment:o,totalInterest:d,payoffDate:h}=l;return e.jsxs(c,{header:a("paymentSummary"),footer:n&&e.jsx(b,{readOnly:!0,before:e.jsx(i,{children:a("totalSavings")}),children:e.jsx(i,{style:{color:"var(--tgui--green)"},children:t(s.summary.totalSavings)})}),children:[e.jsx(b,{subtitle:n&&s?.summary.finalMonthlyPayment!==o&&e.jsxs(i,{style:{color:"var(--tgui--green)"},children:[a("originalPayment"),":",t(o)]}),subhead:a("monthlyPayment"),before:"💰",readOnly:!0,children:e.jsx(i,{children:t(n&&s?.summary.finalMonthlyPayment!==o?s.summary.finalMonthlyPayment:o)})}),e.jsx(b,{subtitle:n&&e.jsxs(i,{style:{color:"var(--tgui--green)"},children:[a("savings"),":",t(s.summary.originalTotalInterest-s.summary.newTotalInterest)]}),subhead:a("totalInterest"),before:"📈",readOnly:!0,children:e.jsx(i,{children:t(n?s.summary.newTotalInterest:d)})}),e.jsx(b,{subtitle:n&&e.jsxs(i,{style:{color:"var(--tgui--green)"},children:[a("monthsSaved"),":",s.summary.originalTerm-s.summary.newTerm]}),subhead:a("loanTerm"),before:"⏱️",readOnly:!0,children:e.jsx(i,{children:n?`${Math.floor(s.summary.newTerm/12)} ${a("years")} ${s.summary.newTerm%12} ${a("months")}`:`${Math.floor(l.loanTerm)} ${a("years")}`})}),e.jsx(b,{subtitle:n&&e.jsxs(i,{style:{color:"var(--tgui--green)"},children:[a("actualPayoffDate"),":",r(s.schedule[s.schedule.length-1].date)]}),subhead:a("planPayoffDate"),before:"🏁",readOnly:!0,children:e.jsx(i,{children:r(h)})}),e.jsx(b,{subhead:a("paymentType"),before:"💵",readOnly:!0,children:e.jsx(i,{children:"annuity"===l.paymentType?a("annuityPayment"):a("differentiatedPayment")})})]})})),V=_.memo((({children:a})=>e.jsx("div",{className:D.tabPanel,children:a}))),H=_.memo((({tabs:a,children:t,defaultTab:r})=>{const[l,s]=_.useState(r||a[0].id),n=C.Children.toArray(t).find((e=>C.isValidElement(e)&&e.props.id===l));return e.jsxs(e.Fragment,{children:[e.jsx(y,{children:a.map((a=>e.jsxs(x,{selected:a.id===l,onClick:()=>s(a.id),children:[a.label&&a.label,a.icon&&e.jsx(j,{children:a.icon})]},a.id)))}),n]})})),Z=[{id:"charts",icon:"📊 "},{id:"schedule",icon:"📅"}],F=()=>e.jsx(v,{children:e.jsxs(g,{children:[e.jsx(L,{}),e.jsxs(H,{tabs:Z,defaultTab:"charts",children:[e.jsx(V,{id:"charts",children:e.jsx(S,{})}),e.jsx(V,{id:"schedule",children:e.jsx(B,{})})]})]})});export{F as default};
//# sourceMappingURL=MortageResult-w-y_1PM1.js.map
