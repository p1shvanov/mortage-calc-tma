{"version":3,"file":"LoanForm-DLbfyrgr.js","sources":["../../src/components/ui/Input.tsx","../../src/components/ui/InputNumberFormat.tsx","../../src/components/ui/Select.tsx","../../src/types/form.ts","../../src/hooks/useLoanForm.ts","../../src/utils/unformatFormValues.ts","../../src/components/form/LoanDetailsForm.tsx","../../src/components/form/EarlyPaymentsForm.tsx","../../src/components/form/RegularPaymentsForm.tsx","../../src/forms/LoanForm/LoanForm.tsx"],"sourcesContent":["import { forwardRef } from 'react';\nimport {\n  Caption,\n  Spinner,\n  Input as TGInput,\n  InputProps as TGInputProps,\n} from '@telegram-apps/telegram-ui';\nimport type { AnyFieldApi } from '@tanstack/react-form';\n\nexport type InputPropsType = {\n  field: AnyFieldApi;\n} & TGInputProps;\n\nconst Input = forwardRef<HTMLInputElement, InputPropsType>(\n  (props, forwardedRef) => {\n    const { field, ...rest } = props;\n\n    const { isTouched, errors, isValidating } = field.state.meta;\n\n    return (\n      <>\n        <TGInput\n          {...rest}\n          ref={forwardedRef}\n          id={field.name}\n          name={field.name}\n          value={field.state.value}\n          onBlur={field.handleBlur}\n          onChange={(e) => field.handleChange(e.target.value)}\n          status={errors.length ? 'error' : 'default'}\n          after={isValidating ? <Spinner size='s' /> : rest.after}\n        />\n        {isTouched && errors.length ? (\n          <Caption\n            style={{\n              color: 'var(--tg-theme-destructive-text-color)',\n              padding: '0 24px',\n            }}\n          >\n            {errors.map((error) => error.message).join(', ')}\n          </Caption>\n        ) : null}\n      </>\n    );\n  }\n);\n\nexport default Input;\n","import { FC } from 'react';\nimport { InputNumberFormat as RIInputNumberFormat, InputNumberFormatProps as RIInputNumberFormatProps } from '@react-input/number-format';\nimport Input, { InputPropsType } from './Input';\n\n\nexport type InputNumberFormatPropsType = InputPropsType & RIInputNumberFormatProps\n\nconst InputNumberFormat: FC<InputNumberFormatPropsType> = (props) => {\n    return (\n        <RIInputNumberFormat {...props} component={Input} />\n    );\n};\n\nexport default InputNumberFormat;","import { forwardRef } from 'react';\nimport {\n  Caption,\n  Select as TGSelect,\n  SelectProps as TGSelectProps,\n} from '@telegram-apps/telegram-ui';\n\nimport type { AnyFieldApi } from '@tanstack/react-form';\n\nexport type SelectOptionType = {\n  label: string;\n  value: string;\n};\n\nexport type SelectPropsType = {\n  field: AnyFieldApi;\n  options: SelectOptionType[];\n} & Omit<TGSelectProps, 'children'>;\n\nconst Select = forwardRef<HTMLSelectElement, SelectPropsType>((props) => {\n  const { field, options, ...rest } = props;\n  const { isTouched, errors } = field.state.meta;\n\n  return (\n    <>\n      <TGSelect\n        {...rest}\n        id={field.name}\n        name={field.name}\n        value={field.state.value}\n        onBlur={field.handleBlur}\n        onChange={(e) => field.handleChange(e.target.value)}\n      >\n        {options.map(({ value, label }) => (\n          <option key={value} value={value}>\n            {label}\n          </option>\n        ))}\n      </TGSelect>\n      {isTouched && errors.length ? (\n        <Caption\n          style={{\n            color: 'var(--tg-theme-destructive-text-color)',\n            padding: '0 24px',\n          }}\n        >\n          {errors.join(', ')}\n        </Caption>\n      ) : null}\n    </>\n  );\n});\n\nexport default Select;\n","export type EarlyPaymentType = {\n  id: string;\n  date: string;\n  amount: string;\n  type: 'reduceTerm' | 'reducePayment';\n};\n\nexport type RegularPaymentType = {\n  id: string;\n  amount: string;\n  startMonth: string; // Month to start regular payments\n  endMonth: string;   // Month to end regular payments (optional)\n  type: 'reduceTerm' | 'reducePayment'; // Recalculation type\n};\n\nexport type LoanDetailsType = {\n  loanAmount: string;\n  interestRate: string;\n  loanTerm: string;\n  startDate: string;\n  paymentType: 'annuity' | 'differentiated';\n  paymentDay: string;\n  earlyPayments: EarlyPaymentType[];\n  regularPayments: RegularPaymentType[];\n};\n\nexport const defaultLoanDetails: LoanDetailsType = {\n  loanAmount: '',\n  interestRate: '',\n  loanTerm: '',\n  startDate: new Date().toISOString().split('T')[0],\n  paymentType: 'annuity',\n  paymentDay: new Date().getDate().toLocaleString(),\n  earlyPayments: [],\n  regularPayments: [],\n};\n","import { createFormHook, formOptions, createFormHookContexts } from '@tanstack/react-form';\nimport { defaultLoanDetails } from '@/types/form';\nimport { unformatFormValues } from '@/utils/unformatFormValues';\nimport { useMortgage } from '@/providers/MortgageProvider';\nimport { useNavigate } from 'react-router-dom';\n\nexport const { fieldContext, formContext, useFieldContext, useFormContext } = createFormHookContexts();\n\nexport const { useAppForm, withForm } = createFormHook({\n  fieldContext,\n  formContext,\n  fieldComponents: {},\n  formComponents: {},\n});\n\nexport const formOpts = formOptions({\n  defaultValues: defaultLoanDetails,\n});\n\nexport const useLoanForm = () => {\n  const { setLoanDetails, setEarlyPayments, setRegularPayments } = useMortgage();\n  const navigate = useNavigate();\n  return useAppForm({\n    ...formOpts,\n    onSubmit: async ({ value }) => {\n      try {\n        const loanDetails = unformatFormValues(value);\n        const { earlyPayments, regularPayments, ...rest } = loanDetails;\n        setLoanDetails(rest);\n        setEarlyPayments(earlyPayments);\n        setRegularPayments(regularPayments);\n        navigate('result')\n      } catch (error) {\n        console.log(error);\n      }\n    },\n  });\n};\n","import { unformat } from '@react-input/number-format';\nimport { LoanDetailsType } from '@/types/form';\n\n/**\n * Transforms form values from strings to numbers\n * @param values Form values with string types\n * @returns Transformed values with number types\n */\nexport function unformatFormValues(values: LoanDetailsType) {\n  return {\n    loanAmount: parseFloat(unformat(values.loanAmount)),\n    interestRate: parseFloat(unformat(values.interestRate)),\n    loanTerm: parseFloat(unformat(values.loanTerm)),\n    startDate: values.startDate,\n    paymentType: values.paymentType,\n    paymentDay: parseInt(values.paymentDay),\n    earlyPayments: values.earlyPayments.map((earlyPayment) => ({\n      ...earlyPayment,\n      amount: parseFloat(unformat(earlyPayment.amount))\n    })),\n    regularPayments: values.regularPayments.map((regularPayment) => ({\n      ...regularPayment,\n      amount: parseFloat(unformat(regularPayment.amount))\n    })),\n  }\n}\n","import { memo } from 'react';\nimport { List, Section } from '@telegram-apps/telegram-ui';\nimport { useLocalization } from '@/providers/LocalizationProvider';\nimport InputNumberFormat from '@/components/ui/InputNumberFormat';\nimport Select from '@/components/ui/Select';\nimport Input from '@/components/ui/Input';\nimport { formOpts, withForm } from '@/hooks/useLoanForm';\n\nconst LoanDetailsForm = withForm({\n  ...formOpts,\n  render: function Render({ form }) {\n    const { t, language } = useLocalization();\n\n    return (\n      <Section header={t('loanDetails')}>\n        <List>\n          <form.Field\n            name={'loanAmount'}\n            children={(field) => (\n              <InputNumberFormat\n                header={t('loanAmount')}\n                placeholder={t('loanAmount')}\n                field={field}\n                inputMode='decimal'\n                maximumFractionDigits={2}\n              />\n            )}\n          />\n          <form.Field\n            name={'interestRate'}\n            children={(field) => (\n              <InputNumberFormat\n                header={t('interestRate')}\n                placeholder={t('interestRate')}\n                field={field}\n                format='percent'\n                inputMode='decimal'\n                maximumFractionDigits={2}\n              />\n            )}\n          />\n          <form.Field\n            name={'loanTerm'}\n            children={(field) => (\n              <InputNumberFormat\n                format='unit'\n                unit='year'\n                locales={language}\n                header={t('loanTerm')}\n                placeholder={t('loanTerm')}\n                field={field}\n                inputMode='numeric'\n                maximumIntegerDigits={2}\n              />\n            )}\n          />\n          <form.Field\n            name={'startDate'}\n            children={(field) => (\n              <Input\n                header={t('startDate')}\n                placeholder={t('startDate')}\n                field={field}\n                type='date'\n              />\n            )}\n          />\n          <form.Field\n            name={'paymentType'}\n            children={(field) => (\n              <Select\n                header={t('paymentType')}\n                field={field}\n                options={[\n                  {\n                    label: t('annuityPayment'),\n                    value: 'annuity',\n                  },\n                  {\n                    label: t('differentiatedPayment'),\n                    value: 'differentiated',\n                  },\n                ]}\n              />\n            )}\n          />\n          <form.Field\n            name={'paymentDay'}\n            children={(field) => (\n              <Select\n                header={t('paymentDay')}\n                field={field}\n                options={Array.from({ length: 31 }, (_, i) => i + 1).map(\n                  (day) => ({\n                    label: String(day),\n                    value: String(day),\n                  })\n                )}\n              />\n            )}\n          />\n        </List>\n      </Section>\n    );\n  },\n});\n\nexport default memo(LoanDetailsForm);\n","import { memo, useState } from 'react';\nimport { Accordion, Badge, Button, List, Section } from '@telegram-apps/telegram-ui';\nimport { useLocalization } from '@/providers/LocalizationProvider';\nimport InputNumberFormat from '@/components/ui/InputNumberFormat';\nimport Select from '@/components/ui/Select';\nimport Input from '@/components/ui/Input';\nimport { formOpts, withForm } from '@/hooks/useLoanForm';\n\nconst EarlyPaymentsForm = withForm({\n  ...formOpts,\n  render: function Render({ form }) {\n    const [open, setOpen] = useState(false);\n    const { t } = useLocalization();\n\n    return (\n      <Section>\n        <form.Field name='earlyPayments' mode='array'>\n          {(field) => {\n            return (\n              <Accordion\n                expanded={open}\n                onChange={() => setOpen((prev) => !prev)}\n              >\n                <Accordion.Summary>\n                  {t('earlyPayment')}\n                  {Boolean(field.state.value.length) && (\n                    <Badge large type='dot'>\n                      {field.state.value.length}\n                    </Badge>\n                  )}\n                </Accordion.Summary>\n                <Accordion.Content style={{ background: 'transparent' }}>\n                  <Section>\n                    {field.state.value.map((_, i) => {\n                      return (\n                        <List key={i}>\n                          <form.Field\n                            name={`earlyPayments[${i}].amount`}\n                            children={(field) => (\n                              <InputNumberFormat\n                                header={t('earlyPaymentAmount')}\n                                placeholder={t('earlyPaymentAmount')}\n                                field={field}\n                                inputMode='decimal'\n                                maximumFractionDigits={2}\n                              />\n                            )}\n                          />\n                          <form.Field\n                            name={`earlyPayments[${i}].date`}\n                            children={(field) => (\n                              <Input\n                                header={t('earlyPaymentDate')}\n                                placeholder={t('earlyPaymentDate')}\n                                field={field}\n                                type='date'\n                              />\n                            )}\n                          />\n                          <form.Field\n                            name={`earlyPayments[${i}].type`}\n                            children={(field) => (\n                              <Select\n                                header={t('earlyPaymentType')}\n                                field={field}\n                                options={[\n                                  {\n                                    label: t('typeReduceTerm'),\n                                    value: 'reduceTerm',\n                                  },\n                                  {\n                                    label: t('typeReducePayment'),\n                                    value: 'reducePayment',\n                                  },\n                                ]}\n                              />\n                            )}\n                          />\n                          <form.Subscribe\n                            selector={(state) => [\n                              state.isFieldsValid,\n                              state.isValid,\n                            ]}\n                            children={([isFieldsValid, isValid]) => (\n                              <Button\n                                size='s'\n                                mode='outline'\n                                disabled={!isFieldsValid || !isValid}\n                                stretched\n                                onClick={() => field.removeValue(i)}\n                              >\n                                {t('remove')}\n                              </Button>\n                            )}\n                          />\n                        </List>\n                      );\n                    })}\n                    <form.Subscribe\n                      selector={(state) => [state.isFieldsValid, state.isValid]}\n                      children={([isFieldsValid, isValid]) => (\n                        <Button\n                          disabled={!isFieldsValid || !isValid}\n                          stretched\n                          onClick={() =>\n                            field.pushValue({\n                              amount: '',\n                              date: new Date().toISOString().split('T')[0],\n                              id: Date.now().toString(),\n                              type: 'reduceTerm',\n                            })\n                          }\n                        >\n                          {t('addEarlyPayment')}\n                        </Button>\n                      )}\n                    />\n                  </Section>\n                </Accordion.Content>\n              </Accordion>\n            );\n          }}\n        </form.Field>\n      </Section>\n    );\n  },\n});\n\nexport default memo(EarlyPaymentsForm); ","import { memo, useState } from 'react';\nimport { Accordion, Badge, Button, List, Section } from '@telegram-apps/telegram-ui';\nimport { useLocalization } from '@/providers/LocalizationProvider';\nimport InputNumberFormat from '@/components/ui/InputNumberFormat';\nimport Select from '@/components/ui/Select';\nimport Input from '@/components/ui/Input';\nimport { formOpts, withForm } from '@/hooks/useLoanForm';\n\n/**\n * Form component for regular payments\n * Allows users to set up recurring monthly payments with a specified amount,\n * date range, and recalculation type (reduce term or reduce payment)\n */\nconst RegularPaymentsForm = withForm({\n  ...formOpts,\n  render: function Render({ form }) {\n    const [open, setOpen] = useState(false);\n    const { t } = useLocalization();\n\n    return (\n      <Section>\n        <form.Field name='regularPayments' mode='array'>\n          {(field) => {\n            return (\n              <Accordion\n                expanded={open}\n                onChange={() => setOpen((prev) => !prev)}\n              >\n                <Accordion.Summary>\n                  {t('regularPayment')}\n                  {Boolean(field.state.value.length) && (\n                    <Badge large type='dot'>\n                      {field.state.value.length}\n                    </Badge>\n                  )}\n                </Accordion.Summary>\n                <Accordion.Content style={{ background: 'transparent' }}>\n                  <Section>\n                    {field.state.value.map((_, i) => {\n                      return (\n                        <List key={i}>\n                          <form.Field\n                            name={`regularPayments[${i}].amount`}\n                            children={(field) => (\n                              <InputNumberFormat\n                                header={t('regularPaymentAmount')}\n                                placeholder={t('regularPaymentAmount')}\n                                field={field}\n                                inputMode='decimal'\n                                maximumFractionDigits={2}\n                              />\n                            )}\n                          />\n                          <form.Field\n                            name={`regularPayments[${i}].startMonth`}\n                            children={(field) => (\n                              <Input\n                                header={t('startMonth')}\n                                placeholder={t('startMonth')}\n                                field={field}\n                                type='date'\n                              />\n                            )}\n                          />\n                          <form.Field\n                            name={`regularPayments[${i}].endMonth`}\n                            children={(field) => (\n                              <Input\n                                header={t('endMonth')}\n                                placeholder={t('endMonth')}\n                                field={field}\n                                type='date'\n                              />\n                            )}\n                          />\n                          <form.Field\n                            name={`regularPayments[${i}].type`}\n                            children={(field) => (\n                              <Select\n                                header={t('earlyPaymentType')}\n                                field={field}\n                                options={[\n                                  {\n                                    label: t('typeReduceTerm'),\n                                    value: 'reduceTerm',\n                                  },\n                                  {\n                                    label: t('typeReducePayment'),\n                                    value: 'reducePayment',\n                                  },\n                                ]}\n                              />\n                            )}\n                          />\n                          <form.Subscribe\n                            selector={(state) => [\n                              state.isFieldsValid,\n                              state.isValid,\n                            ]}\n                            children={([isFieldsValid, isValid]) => (\n                              <Button\n                                size='s'\n                                mode='outline'\n                                disabled={!isFieldsValid || !isValid}\n                                stretched\n                                onClick={() => field.removeValue(i)}\n                              >\n                                {t('remove')}\n                              </Button>\n                            )}\n                          />\n                        </List>\n                      );\n                    })}\n                    <form.Subscribe\n                      selector={(state) => [state.isFieldsValid, state.isValid]}\n                      children={([isFieldsValid, isValid]) => (\n                        <Button\n                          disabled={!isFieldsValid || !isValid}\n                          stretched\n                          onClick={() =>\n                            field.pushValue({\n                              amount: '',\n                              startMonth: new Date().toISOString().split('T')[0],\n                              endMonth: '',\n                              id: Date.now().toString(),\n                              type: 'reduceTerm',\n                            })\n                          }\n                        >\n                          {t('addRegularPayment')}\n                        </Button>\n                      )}\n                    />\n                  </Section>\n                </Accordion.Content>\n              </Accordion>\n            );\n          }}\n        </form.Field>\n      </Section>\n    );\n  },\n});\n\nexport default memo(RegularPaymentsForm);\n","import { FC, memo } from 'react';\n\nimport { List, Section, Button } from '@telegram-apps/telegram-ui';\n\nimport LoanDetailsForm from '@/components/form/LoanDetailsForm';\nimport EarlyPaymentsForm from '@/components/form/EarlyPaymentsForm';\nimport RegularPaymentsForm from '@/components/form/RegularPaymentsForm';\n\nimport { useLocalization } from '@/providers/LocalizationProvider';\nimport { useLoanForm } from '@/hooks/useLoanForm';\nimport Page from '@/components/Page';\n\nconst LoanForm: FC = () => {\n  const { t } = useLocalization();\n  const form = useLoanForm();\n\n  return (\n    <Page back={false}>\n      <List\n        Component='form'\n        onSubmit={(event) => {\n          event.preventDefault();\n          event.stopPropagation();\n          form.handleSubmit();\n        }}\n      >\n        <LoanDetailsForm form={form} />\n        <EarlyPaymentsForm form={form} />\n        <RegularPaymentsForm form={form} />\n        <Section>\n          <form.Subscribe\n            selector={(state) => [state.canSubmit, state.isSubmitting]}\n            children={([canSubmit, isSubmitting]) => (\n              <Button\n                type='submit'\n                stretched\n                disabled={!canSubmit}\n                loading={isSubmitting}\n              >\n                {t('calculate')}\n              </Button>\n            )}\n          />\n        </Section>\n      </List>\n    </Page>\n  );\n};\n\nexport default memo(LoanForm);\n"],"names":["Input","forwardRef","props","forwardedRef","field","rest","isTouched","errors","isValidating","state","meta","jsxs","Fragment","children","jsx","TGInput","ref","id","name","value","onBlur","handleBlur","onChange","e","handleChange","target","status","length","after","Spinner","size","Caption","style","color","padding","map","error","message","join","InputNumberFormat","RIInputNumberFormat","component","Select","options","TGSelect","label","defaultLoanDetails","loanAmount","interestRate","loanTerm","startDate","Date","toISOString","split","paymentType","paymentDay","getDate","toLocaleString","earlyPayments","regularPayments","fieldContext","formContext","createFormHookContexts","useAppForm","withForm","createFormHook","fieldComponents","formComponents","formOpts","formOptions","defaultValues","useLoanForm","setLoanDetails","setEarlyPayments","setRegularPayments","useMortgage","navigate","useNavigate","onSubmit","async","loanDetails","values","parseFloat","unformat","parseInt","earlyPayment","amount","regularPayment","console","log","LoanDetailsForm","render","form","t","language","useLocalization","Section","header","List","Field","placeholder","inputMode","maximumFractionDigits","format","unit","locales","maximumIntegerDigits","type","Array","from","_","i","day","String","memo","EarlyPaymentsForm","open","setOpen","useState","mode","Accordion","expanded","prev","Summary","Boolean","Badge","large","Content","background","Subscribe","selector","isFieldsValid","isValid","Button","disabled","stretched","onClick","removeValue","pushValue","date","now","toString","RegularPaymentsForm","startMonth","endMonth","Page","back","Component","event","preventDefault","stopPropagation","handleSubmit","canSubmit","isSubmitting","loading"],"mappings":"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"}