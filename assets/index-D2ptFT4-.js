const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LineChart-CKjVf_Qq.js","assets/vendor-telegram-Xyn1H4hC.js","assets/vendor-react-Dt9UIenE.js","assets/vendor-charts-CSOtlk4G.js","assets/vendor-forms-QdXTO7se.js","assets/PieChart-lz0HP0H8.js","assets/BarChart-DGMyHLHi.js","assets/DoughnutChart-CSgHFAKr.js","assets/RadarChart-BLcnUMwh.js","assets/eruda-BbdIQ3UH.js"])))=>i.map(i=>d[i]);
import{j as e,$ as t,S as a,_ as n,a as r,b as s,c as l,C as o,T as i,n as m,d as c,M as d,I as u,P as h,y,e as p,f as g,g as f,h as x,i as b,G as P,L as j,k as v,l as D,m as S,Y as w,A as T,B as M,o as A,p as C,E as R,q as _,r as I,s as k,t as F,u as E,v as N,w as O,x as L,z as B,X as V,O as $,D as z,F as W,H as U,J as H,K as Y,N as q,Q as Z,R as G,U as J}from"./vendor-telegram-Xyn1H4hC.js";import{e as K,g as Q,a as X,d as ee,u as te,L as ae,H as ne,f as re,h as se,N as le}from"./vendor-react-Dt9UIenE.js";import{u as oe,x as ie,z as me,c as ce,a as de,f as ue}from"./vendor-forms-QdXTO7se.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var he,ye={};const pe=Q(function(){if(he)return ye;he=1;var e=K();return ye.createRoot=e.createRoot,ye.hydrateRoot=e.hydrateRoot,ye}()),ge=X.memo((({error:t})=>e.jsxs("div",{children:[e.jsx("p",{children:"An unhandled error occurred:"}),e.jsx("blockquote",{children:e.jsx("code",{children:t instanceof Error?t.message:"string"==typeof t?t:JSON.stringify(t)})})]})));class fe extends X.Component{state={};static getDerivedStateFromError=e=>({error:e});componentDidCatch(e){this.setState({error:e})}render(){const{state:{error:t},props:{fallback:a,children:n}}=this;return"error"in this.state?"function"==typeof a?e.jsx(a,{error:t}):a:n}}const xe={},be=function(e,t,a){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),a=e?.nonce||e?.getAttribute("nonce");n=Promise.allSettled(t.map((e=>{if((e=function(e){return"/mortage-calc-tma/"+e}(e))in xe)return;xe[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,a&&r.setAttribute("nonce",a),document.head.appendChild(r),t?new Promise(((t,a)=>{r.addEventListener("load",t),r.addEventListener("error",(()=>a(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then((t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)}))},Pe={en:{appTitle:"Mortgage Calculator",mustBeNumber:"{field} must be a number",mustBeGreaterThan:"{field} must be greater than {value}",mustBeLessThan:"{field} must be less than or equal to {value}",invalidDate:"{field} has an invalid date format",endDateAfterStart:"{endField} must be after {startField}",invalidNumber:"Must be a valid number",mustBePositive:"Must be a positive number",dayOfMonth:"Day must be between 1 and 31",loanDetails:"Loan Details",homeValue:"Home Value",downPayment:"Down Payment",loanAmount:"Loan Amount",interestRate:"Interest Rate",loanTerm:"Loan Term (years)",startDate:"Start Date",paymentType:"Payment Type",annuityPayment:"Annuity",differentiatedPayment:"Differentiated",paymentDay:"Payment Day",paymentDayMonthly:"Same day as start date",paymentDaySpecific:"Specific day of month",paymentSummary:"Payment Summary",monthlyPayment:"Monthly Payment",totalInterest:"Total Interest",totalCost:"Total Cost",planPayoffDate:"Plan Payoff Date",actualPayoffDate:"Actual Payoff Date",earlyPayment:"Early Payment",earlyPaymentAmount:"Additional Amount",earlyPaymentMonth:"Month of Payment",earlyPaymentDate:"Date of Payment",earlyPaymentType:"Payment Type",typeReduceTerm:"Reduce Term",typeReducePayment:"Reduce Payment",addEarlyPayment:"Add Early Payment",earlyPaymentList:"Scheduled Early Payments",remove:"Remove",paymentHistory:"Early Payments",totalEarlyPayments:"Total Early Payments",errorPaymentAmount:"Payment amount must be greater than 0",errorPaymentMonth:"Payment month must be within the loan term",errorPaymentDate:"Payment date must be within the loan term",regularPayment:"Regular Payment",regularPaymentAmount:"Regular Payment Amount",startMonth:"Start Month",endMonth:"End Month (Optional)",addRegularPayment:"Add Regular Payment",insufficientPayment:"Insufficient",yes:"Yes",finalPayment:"Final Payment",originalPayment:"Original Payment",savings:"Interest Savings",monthsSaved:"Months Saved",totalSavings:"Total Interest Savings",amortization:"Amortization Schedule",paymentSchedule:"Payment Schedule",month:"Month",date:"Date",payment:"Payment",principal:"Principal",interest:"Interest",extraPayment:"Extra Payment",balance:"Balance",previous:"Previous",next:"Next",showingPayments:"Showing payments {from}-{to} of {total}",graphicalView:"Graphical View",paymentBreakdown:"Payment Breakdown",amortizationSchedule:"Amortization Schedule",paymentAmount:"Payment Amount",paymentDistribution:"Payment Distribution",interestSavings:"Interest Savings",newTotalInterest:"New Total Interest",interestSaved:"Interest Saved",monthlyPaymentBreakdown:"Monthly Payment Breakdown",totalPaymentBreakdown:"Total Payment Breakdown",mortgageComparison:"Mortgage Comparison",original:"Original Mortgage",withEarlyPayments:"With Early Payments",errorHomeValue:"Home value must be greater than 0",errorDownPayment:"Down payment must be greater than 0",errorDownPaymentMax:"Down payment must be less than home value",errorInterestRate:"Interest rate must be greater than 0",errorLoanTerm:"Loan term must be greater than 0",calculate:"Calculate",reset:"Reset",years:"years",months:"months"},ru:{appTitle:"Ð˜Ð¿Ð¾Ñ‚ÐµÑ‡Ð½Ñ‹Ð¹ ÐºÐ°Ð»ÑŒÐºÑƒÐ»ÑÑ‚Ð¾Ñ€",mustBeNumber:"{field} Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ñ‡Ð¸ÑÐ»Ð¾Ð¼",mustBeGreaterThan:"{field} Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ð±Ð¾Ð»ÑŒÑˆÐµ {value}",mustBeLessThan:"{field} Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ð¼ÐµÐ½ÑŒÑˆÐµ Ð¸Ð»Ð¸ Ñ€Ð°Ð²ÐµÐ½ {value}",invalidDate:"{field} Ð¸Ð¼ÐµÐµÑ‚ Ð½ÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ Ð´Ð°Ñ‚Ñ‹",endDateAfterStart:"{endField} Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ð¿Ð¾ÑÐ»Ðµ {startField}",invalidNumber:"Ð”Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¼ Ñ‡Ð¸ÑÐ»Ð¾Ð¼",mustBePositive:"Ð”Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ Ð¿Ð¾Ð»Ð¾Ð¶Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¼ Ñ‡Ð¸ÑÐ»Ð¾Ð¼",dayOfMonth:"Ð”ÐµÐ½ÑŒ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ð¼ÐµÐ¶Ð´Ñƒ 1 Ð¸ 31",loanDetails:"Ð”ÐµÑ‚Ð°Ð»Ð¸ ÐºÑ€ÐµÐ´Ð¸Ñ‚Ð°",homeValue:"Ð¡Ñ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚Ð¸",downPayment:"ÐŸÐµÑ€Ð²Ð¾Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð²Ð·Ð½Ð¾Ñ",loanAmount:"Ð¡ÑƒÐ¼Ð¼Ð° ÐºÑ€ÐµÐ´Ð¸Ñ‚Ð°",interestRate:"ÐŸÑ€Ð¾Ñ†ÐµÐ½Ñ‚Ð½Ð°Ñ ÑÑ‚Ð°Ð²ÐºÐ°",loanTerm:"Ð¡Ñ€Ð¾Ðº ÐºÑ€ÐµÐ´Ð¸Ñ‚Ð° (Ð»ÐµÑ‚)",startDate:"Ð”Ð°Ñ‚Ð° Ð½Ð°Ñ‡Ð°Ð»Ð°",paymentType:"Ð¢Ð¸Ð¿ Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð°",annuityPayment:"ÐÐ½Ð½ÑƒÐ¸Ñ‚ÐµÑ‚Ð½Ñ‹Ð¹",differentiatedPayment:"Ð”Ð¸Ñ„Ñ„ÐµÑ€ÐµÐ½Ñ†Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹",paymentDay:"Ð”ÐµÐ½ÑŒ Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð°",paymentDayMonthly:"Ð’ Ñ‚Ð¾Ñ‚ Ð¶Ðµ Ð´ÐµÐ½ÑŒ, Ñ‡Ñ‚Ð¾ Ð¸ Ð´Ð°Ñ‚Ð° Ð½Ð°Ñ‡Ð°Ð»Ð°",paymentDaySpecific:"ÐšÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ Ð¼ÐµÑÑÑ†Ð°",paymentSummary:"Ð¡Ð²Ð¾Ð´ÐºÐ° Ð¿Ð¾ Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð°Ð¼",monthlyPayment:"Ð•Ð¶ÐµÐ¼ÐµÑÑÑ‡Ð½Ñ‹Ð¹ Ð¿Ð»Ð°Ñ‚ÐµÐ¶",totalInterest:"ÐžÐ±Ñ‰Ð¸Ð¹ Ð¿Ñ€Ð¾Ñ†ÐµÐ½Ñ‚",totalCost:"ÐžÐ±Ñ‰Ð°Ñ ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ",planPayoffDate:"ÐŸÐ»Ð°Ð½Ð¾Ð²Ð°Ñ Ð´Ð°Ñ‚Ð° Ð¿Ð¾Ð³Ð°ÑˆÐµÐ½Ð¸Ñ",actualPayoffDate:"Ð¤Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð´Ð°Ñ‚Ð° Ð¿Ð¾Ð³Ð°ÑˆÐµÐ½Ð¸Ñ",earlyPayment:"Ð”Ð¾ÑÑ€Ð¾Ñ‡Ð½Ð¾Ðµ Ð¿Ð¾Ð³Ð°ÑˆÐµÐ½Ð¸Ðµ",earlyPaymentAmount:"Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ ÑÑƒÐ¼Ð¼Ð°",earlyPaymentMonth:"ÐœÐµÑÑÑ† Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð°",earlyPaymentDate:"Ð”Ð°Ñ‚Ð° Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð°",earlyPaymentType:"Ð¢Ð¸Ð¿ Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð°",typeReduceTerm:"Ð¡Ð¾ÐºÑ€Ð°Ñ‚Ð¸Ñ‚ÑŒ ÑÑ€Ð¾Ðº",typeReducePayment:"Ð£Ð¼ÐµÐ½ÑŒÑˆÐ¸Ñ‚ÑŒ Ð¿Ð»Ð°Ñ‚ÐµÐ¶",addEarlyPayment:"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð´Ð¾ÑÑ€Ð¾Ñ‡Ð½Ñ‹Ð¹ Ð¿Ð»Ð°Ñ‚ÐµÐ¶",earlyPaymentList:"Ð—Ð°Ð¿Ð»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð¾ÑÑ€Ð¾Ñ‡Ð½Ñ‹Ðµ Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð¸",remove:"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ",paymentHistory:"Ð”Ð¾ÑÑ€Ð¾Ñ‡Ð½Ñ‹Ðµ Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð¸",totalEarlyPayments:"Ð’ÑÐµÐ³Ð¾ Ð´Ð¾ÑÑ€Ð¾Ñ‡Ð½Ñ‹Ñ… Ð¿Ð»Ð°Ñ‚ÐµÐ¶ÐµÐ¹",errorPaymentAmount:"Ð¡ÑƒÐ¼Ð¼Ð° Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð° Ð´Ð¾Ð»Ð¶Ð½Ð° Ð±Ñ‹Ñ‚ÑŒ Ð±Ð¾Ð»ÑŒÑˆÐµ 0",errorPaymentMonth:"ÐœÐµÑÑÑ† Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð° Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ð² Ð¿Ñ€ÐµÐ´ÐµÐ»Ð°Ñ… ÑÑ€Ð¾ÐºÐ° ÐºÑ€ÐµÐ´Ð¸Ñ‚Ð°",errorPaymentDate:"Ð”Ð°Ñ‚Ð° Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð° Ð´Ð¾Ð»Ð¶Ð½Ð° Ð±Ñ‹Ñ‚ÑŒ Ð² Ð¿Ñ€ÐµÐ´ÐµÐ»Ð°Ñ… ÑÑ€Ð¾ÐºÐ° ÐºÑ€ÐµÐ´Ð¸Ñ‚Ð°",regularPayment:"Ð ÐµÐ³ÑƒÐ»ÑÑ€Ð½Ñ‹Ð¹ Ð¿Ð»Ð°Ñ‚ÐµÐ¶",regularPaymentAmount:"Ð¡ÑƒÐ¼Ð¼Ð° Ñ€ÐµÐ³ÑƒÐ»ÑÑ€Ð½Ð¾Ð³Ð¾ Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð°",startMonth:"ÐœÐµÑÑÑ† Ð½Ð°Ñ‡Ð°Ð»Ð°",endMonth:"ÐœÐµÑÑÑ† Ð¾ÐºÐ¾Ð½Ñ‡Ð°Ð½Ð¸Ñ (ÐžÐ¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)",addRegularPayment:"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ€ÐµÐ³ÑƒÐ»ÑÑ€Ð½Ñ‹Ð¹ Ð¿Ð»Ð°Ñ‚ÐµÐ¶",insufficientPayment:"ÐÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾",yes:"Ð”Ð°",finalPayment:"Ð˜Ñ‚Ð¾Ð³Ð¾Ð²Ñ‹Ð¹ Ð¿Ð»Ð°Ñ‚ÐµÐ¶",originalPayment:"ÐŸÐµÑ€Ð²Ð¾Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð»Ð°Ñ‚ÐµÐ¶",savings:"Ð­ÐºÐ¾Ð½Ð¾Ð¼Ð¸Ñ Ð½Ð° Ð¿Ñ€Ð¾Ñ†ÐµÐ½Ñ‚Ð°Ñ…",monthsSaved:"Ð¡ÑÐºÐ¾Ð½Ð¾Ð¼Ð»ÐµÐ½Ð¾ Ð¼ÐµÑÑÑ†ÐµÐ²",totalSavings:"ÐžÐ±Ñ‰Ð°Ñ ÑÐºÐ¾Ð½Ð¾Ð¼Ð¸Ñ Ð½Ð° Ð¿Ñ€Ð¾Ñ†ÐµÐ½Ñ‚Ð°Ñ…",amortization:"Ð“Ñ€Ð°Ñ„Ð¸Ðº Ð¿Ð»Ð°Ñ‚ÐµÐ¶ÐµÐ¹",paymentSchedule:"Ð“Ñ€Ð°Ñ„Ð¸Ðº Ð¿Ð»Ð°Ñ‚ÐµÐ¶ÐµÐ¹",month:"ÐœÐµÑÑÑ†",date:"Ð”Ð°Ñ‚Ð°",payment:"ÐŸÐ»Ð°Ñ‚ÐµÐ¶",principal:"ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ð´Ð¾Ð»Ð³",interest:"ÐŸÑ€Ð¾Ñ†ÐµÐ½Ñ‚Ñ‹",extraPayment:"Ð”Ð¾ÑÑ€Ð¾Ñ‡Ð½Ñ‹Ð¹ Ð¿Ð»Ð°Ñ‚ÐµÐ¶",balance:"ÐžÑÑ‚Ð°Ñ‚Ð¾Ðº",previous:"ÐÐ°Ð·Ð°Ð´",next:"Ð’Ð¿ÐµÑ€ÐµÐ´",showingPayments:"ÐŸÐ»Ð°Ñ‚ÐµÐ¶Ð¸ {from}-{to} Ð¸Ð· {total}",graphicalView:"Ð“Ñ€Ð°Ñ„Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ",paymentBreakdown:"Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð°",amortizationSchedule:"Ð“Ñ€Ð°Ñ„Ð¸Ðº Ð¿Ð¾Ð³Ð°ÑˆÐµÐ½Ð¸Ñ",paymentAmount:"Ð¡ÑƒÐ¼Ð¼Ð° Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð°",paymentDistribution:"Ð Ð°ÑÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð¿Ð»Ð°Ñ‚ÐµÐ¶ÐµÐ¹",interestSavings:"Ð­ÐºÐ¾Ð½Ð¾Ð¼Ð¸Ñ Ð½Ð° Ð¿Ñ€Ð¾Ñ†ÐµÐ½Ñ‚Ð°Ñ…",newTotalInterest:"ÐÐ¾Ð²Ð°Ñ Ð¾Ð±Ñ‰Ð°Ñ ÑÑƒÐ¼Ð¼Ð° Ð¿Ñ€Ð¾Ñ†ÐµÐ½Ñ‚Ð¾Ð²",interestSaved:"Ð¡ÑÐºÐ¾Ð½Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ñ†ÐµÐ½Ñ‚Ñ‹",monthlyPaymentBreakdown:"Ð•Ð¶ÐµÐ¼ÐµÑÑÑ‡Ð½Ð°Ñ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¿Ð»Ð°Ñ‚ÐµÐ¶ÐµÐ¹",totalPaymentBreakdown:"ÐžÐ±Ñ‰Ð°Ñ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¿Ð»Ð°Ñ‚ÐµÐ¶ÐµÐ¹",mortgageComparison:"Ð¡Ñ€Ð°Ð²Ð½ÐµÐ½Ð¸Ðµ Ð¸Ð¿Ð¾Ñ‚ÐµÐºÐ¸",original:"ÐŸÐµÑ€Ð²Ð¾Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ð°Ñ Ð¸Ð¿Ð¾Ñ‚ÐµÐºÐ°",withEarlyPayments:"Ð¡ Ð´Ð¾ÑÑ€Ð¾Ñ‡Ð½Ñ‹Ð¼Ð¸ Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð°Ð¼Ð¸",errorHomeValue:"Ð¡Ñ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ð´Ð¾Ð»Ð¶Ð½Ð° Ð±Ñ‹Ñ‚ÑŒ Ð±Ð¾Ð»ÑŒÑˆÐµ 0",errorDownPayment:"ÐŸÐµÑ€Ð²Ð¾Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð²Ð·Ð½Ð¾Ñ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ð±Ð¾Ð»ÑŒÑˆÐµ 0",errorDownPaymentMax:"ÐŸÐµÑ€Ð²Ð¾Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð²Ð·Ð½Ð¾Ñ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ð¼ÐµÐ½ÑŒÑˆÐµ ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ð¶Ð¸Ð»ÑŒÑ",errorInterestRate:"ÐŸÑ€Ð¾Ñ†ÐµÐ½Ñ‚Ð½Ð°Ñ ÑÑ‚Ð°Ð²ÐºÐ° Ð´Ð¾Ð»Ð¶Ð½Ð° Ð±Ñ‹Ñ‚ÑŒ Ð±Ð¾Ð»ÑŒÑˆÐµ 0",errorLoanTerm:"Ð¡Ñ€Ð¾Ðº ÐºÑ€ÐµÐ´Ð¸Ñ‚Ð° Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ð±Ð¾Ð»ÑŒÑˆÐµ 0",calculate:"Ð Ð°ÑÑÑ‡Ð¸Ñ‚Ð°Ñ‚ÑŒ",reset:"Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ",years:"Ð»ÐµÑ‚",months:"Ð¼ÐµÑÑÑ†ÐµÐ²"}},je=X.createContext(void 0),ve=()=>{const e=X.useContext(je);if(!e)throw new Error("useLocalization must be used within a LocalizationProvider");return e},De=({children:a})=>{const[n,r]=X.useState((()=>{try{const e=t();return"ru"===(e.tgWebAppData?.user?.language_code||"en")?"ru":"en"}catch(e){return console.error("Error retrieving user language:",e),"en"}})());return e.jsx(je.Provider,{value:{language:n,setLanguage:r,t:(e,t)=>{const a=Pe.en,r=Pe[n][e]||a[e]||e;return t?Object.entries(t).reduce(((e,[t,a])=>e.replace(`{${t}}`,String(a))),r):r},formatCurrency:e=>"ru"===n?new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0,maximumFractionDigits:0}).format(e):new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),formatNumber:e=>new Intl.NumberFormat("ru"===n?"ru-RU":"en-US").format(e),formatDate:e=>("string"==typeof e?new Date(e):e).toLocaleDateString("ru"===n?"ru-RU":"en-US")},children:a})};var Se=(e=>(e.ACTUAL_365="ACTUAL_365",e.THIRTY_360="THIRTY_360",e.ACTUAL_ACTUAL="ACTUAL_ACTUAL",e))(Se||{});function we(e,t,a,n="annuity",r=1){if("differentiated"===n)return function(e,t,a,n=1){const r=e/(12*a);return r+t/100/12*(e-r*(n-1))}(e,t,a,r);const s=t/100/12,l=12*a;return e*s*Math.pow(1+s,l)/(Math.pow(1+s,l)-1)}function Te(e,t){const a=Math.abs(t.getTime()-e.getTime());return Math.round(a/864e5)}function Me(e){const t=e.getFullYear();return t%4==0&&t%100!=0||t%400==0?366:365}function Ae(e,t,a,n,r="ACTUAL_365"){if("ACTUAL_365"===r){const r=Te(a,n);return e*(t/100/Me(a))*r}{const r=Te(a,n);return e*(t/100/Me(a))*r}}function Ce(e){const{loanAmount:t,interestRate:a,loanTerm:n,startDate:r,paymentType:s="annuity"}=e,l=we(t,a,n,s);let o;if("differentiated"===s){let e=0;const r=12*n;for(let l=1;l<=r;l++)e+=we(t,a,n,s,l);o=e}else o=l*n*12;const i=o-t,m=function(e,t){const a=new Date(e);return a.setFullYear(a.getFullYear()+t),a.toISOString().split("T")[0]}(r,n);return{monthlyPayment:l,totalInterest:i,totalCost:o,payoffDate:m,loanTerm:n,paymentType:s}}class Re{async calculateMortgage(e){const t=Ce({loanAmount:e.loanAmount,interestRate:e.interestRate,loanTerm:e.loanTerm,startDate:e.startDate,paymentType:e.paymentType,paymentDay:e.paymentDay});return{monthlyPayment:t.monthlyPayment,totalInterest:t.totalInterest,totalCost:t.totalCost,payoffDate:t.payoffDate,loanTerm:t.loanTerm,paymentType:t.paymentType,effectiveInterestRate:t.effectiveInterestRate}}async generateAmortizationSchedule(e){const t=function(e){const{loanAmount:t,interestRate:a,loanTerm:n,startDate:r,earlyPayments:s=[],regularPayments:l=[],paymentType:o="annuity",interestCalculationMethod:i=Se.ACTUAL_365}=e,m=12*n,c=a/100/12;let d;d="differentiated"===o?t/m+t*c:t*c*Math.pow(1+c,m)/(Math.pow(1+c,m)-1);const u=[...s].sort(((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime())),h=new Map;u.forEach((e=>{h.set(e.date,{amount:e.amount,type:e.type})}));const y=[];let p=t,g=0,f=d;const x=new Date(r);let b;if("differentiated"===o){let e=0,a=t;const n=t/m;for(let t=0;t<m;t++)e+=n+a*c,a-=n;b=e-t}else b=d*m-t;let P=!1,j=new Date(x),v=1,D=m;for(;v<=D&&p>.01;){const r=new Date(j);if(r.setMonth(j.getMonth()+1),void 0!==e.paymentDay){const t=r.getFullYear(),a=r.getMonth(),n=new Date(t,a+1,0).getDate(),s=Math.min(e.paymentDay,n);r.setDate(s)}const s=Ae(p,a,j,r,i);let d,u;"differentiated"===o?(d=t/(12*n),u=d+s,f=u):(d=f-s,u=f);let x=p-d;const b=r.toISOString().split("T")[0];let S,w=0,T=!1;if(h.has(b)){const e=h.get(b);w=e.amount,S=e.type}const M=new Date(b);for(const e of l){const t=new Date(e.startMonth),a=e.endMonth?new Date(e.endMonth):null;if(M>=t&&(!a||M<=a)){const t=e.amount-f;t>0&&(w>0?(w+=t,S=e.type):(w=t,S=e.type)),T=!0}}if(w>0&&(x-=w,x>0))if("reducePayment"===S){P=!0;const e=m-v+1;D=e,f=x*c*Math.pow(1+c,e)/(Math.pow(1+c,e)-1)}else if("reduceTerm"===S){const e=Math.ceil(Math.log(f/(f-x*c))/Math.log(1+c));D=P?Math.min(D,e):Math.min(D,v+e)}g+=s,y.push({month:v,date:b,payment:f,principal:d,interest:s,totalInterest:g,balance:Math.max(0,x),extraPayment:w>0?w:void 0,extraPaymentType:w>0?S:void 0,isRegularPayment:T,regularPaymentMessage:T&&w<=0?"The specified total payment is less than the monthly payment amount, so early repayment did not occur.":void 0}),p=x,j=r,v++}const S=g;return{schedule:y,summary:{originalTerm:m,newTerm:y.length,originalTotalInterest:b,newTotalInterest:S,originalMonthlyPayment:d,finalMonthlyPayment:y[y.length-1].payment,totalSavings:b-S,paymentType:o}}}({loanAmount:e.loanAmount,interestRate:e.interestRate,loanTerm:e.loanTerm,startDate:e.startDate,paymentType:e.paymentType,paymentDay:e.paymentDay,earlyPayments:e.earlyPayments||[],regularPayments:e.regularPayments||[]});return t}}class _e{_apiBaseUrl;constructor(e){this._apiBaseUrl=e||"/api/mortgage"}async calculateMortgage(e){try{throw new Error("Server implementation not available yet")}catch(t){throw console.error("Error calculating mortgage:",t),t}}async generateAmortizationSchedule(e){try{throw new Error("Server implementation not available yet")}catch(t){throw console.error("Error generating amortization schedule:",t),t}}}const Ie="local",ke="/api/mortgage";const Fe=class{static createMortgageService(e="local",t){switch(e){case"local":return new Re;case"server":try{return new _e(t)}catch(a){return console.warn("Error creating server implementation, falling back to local implementation:",a),new Re}default:return new Re}}}.createMortgageService(Ie,ke),Ee=X.createContext(void 0);function Ne({children:t}){const[a,n]=X.useState(null),[r,s]=X.useState([]),[l,o]=X.useState([]),[i,m]=X.useState(null),[c,d]=X.useState(null);return X.useEffect((()=>{if(a)try{Fe.calculateMortgage({...a,earlyPayments:r,regularPayments:l}).then((e=>{m(e)})).catch((e=>{console.error("Error calculating mortgage results:",e)}))}catch(e){console.error("Error calculating mortgage results:",e)}}),[a]),X.useEffect((()=>{if(a)try{Fe.generateAmortizationSchedule({...a,earlyPayments:r,regularPayments:l}).then((e=>{d(e)})).catch((e=>{console.error("Error generating amortization schedule:",e)}))}catch(e){console.error("Error generating amortization schedule:",e)}}),[a,r,l]),e.jsx(Ee.Provider,{value:{loanDetails:a,setLoanDetails:n,earlyPayments:r,setEarlyPayments:s,regularPayments:l,setRegularPayments:o,mortgageResults:i,amortizationResult:c,setMortgageResults:m,setAmortizationResult:d},children:t})}function Oe(){const e=X.useContext(Ee);if(!e)throw new Error("useMortgage must be used within a MortgageProvider");return e}const Le=X.lazy((()=>be((()=>import("./LineChart-CKjVf_Qq.js")),__vite__mapDeps([0,1,2,3,4])))),Be=X.lazy((()=>be((()=>import("./PieChart-lz0HP0H8.js")),__vite__mapDeps([5,1,2,3,4])))),Ve=X.lazy((()=>be((()=>import("./BarChart-DGMyHLHi.js")),__vite__mapDeps([6,1,2,3,4])))),$e=X.lazy((()=>be((()=>import("./DoughnutChart-CSgHFAKr.js")),__vite__mapDeps([7,1,2,3,4])))),ze=X.lazy((()=>be((()=>import("./RadarChart-BLcnUMwh.js")),__vite__mapDeps([8,1,2,3,4])))),We=X.memo((()=>{const{t:t}=ve(),{amortizationResult:n}=Oe();if(!n||0===n.schedule.length)return null;const r=X.useMemo((()=>n.schedule.map((e=>{const t=new Date(e.date);return`${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear().toString().slice(2)}`}))),[n.schedule.length]),s=X.useMemo((()=>n.schedule.map((e=>e.principal))),[n.schedule.length]),l=X.useMemo((()=>n.schedule.map((e=>e.interest))),[n.schedule.length]),o=X.useMemo((()=>n.schedule.map((e=>e.balance))),[n.schedule.length]),i=X.useMemo((()=>n.schedule.map((e=>({hasExtraPayment:!!e.extraPayment&&e.extraPayment>0,amount:e.extraPayment||0,type:e.extraPaymentType||"",isRegular:e.isRegularPayment||!1})))),[n.schedule]),m=X.useMemo((()=>({labels:r,datasets:[{label:t("principal"),data:s,borderColor:"#4bc0c0",backgroundColor:"#4bc0c033",fill:!0,yAxisID:"y"},{label:t("interest"),data:l,borderColor:"#ff6384",backgroundColor:"#ff638433",fill:!0,yAxisID:"y"},{label:t("balance"),data:o,borderColor:"#36a2eb",backgroundColor:"#36a2eb33",borderDash:[5,5],fill:!1,yAxisID:"y1"}]})),[s.length,o.length,l.length]),c=X.useMemo((()=>{const e=s.reduce(((e,t)=>e+t),0),a=n.summary.newTotalInterest;return{labels:[t("principal"),t("interest")],datasets:[{data:[e,a],backgroundColor:["#4bc0c0","#ff6384"],borderColor:["#4bc0c0","#ff6384"],borderWidth:1}]}}),[s,n.summary.newTotalInterest,t]),d=X.useMemo((()=>{if(!n.schedule.some((e=>e.extraPayment&&e.extraPayment>0)))return null;const e=n.summary.originalTotalInterest,a=n.summary.newTotalInterest,r=e-a;return{labels:[t("newTotalInterest"),t("interestSaved")],datasets:[{data:[a,r],backgroundColor:["#36a2eb","#4bc0c0"],borderColor:["#36a2eb","#4bc0c0"],borderWidth:1}]}}),[n,t]),u=X.useMemo((()=>{const e=Math.max(1,Math.floor(r.length/12)),a=r.filter(((t,a)=>a%e==0)),n=s.filter(((t,a)=>a%e==0)),o=l.filter(((t,a)=>a%e==0));return{labels:a,datasets:[{label:t("principal"),data:n,backgroundColor:"#4bc0c0"},{label:t("interest"),data:o,backgroundColor:"#ff6384"}]}}),[r,s,l,t]),h=X.useMemo((()=>{const e=s.reduce(((e,t)=>e+t),0),a=n.summary.newTotalInterest,r=n.schedule.reduce(((e,t)=>e+(t.extraPayment||0)),0);return{labels:[t("principal"),t("interest"),t("extraPayment")],datasets:[{data:[e,a,r],backgroundColor:["#4bc0c0","#ff6384","#ffcd56"],borderColor:["#4bc0c0","#ff6384","#ffcd56"],borderWidth:1,hoverOffset:10}]}}),[s,n,t]),y=X.useMemo((()=>{if(!n.schedule.some((e=>e.extraPayment&&e.extraPayment>0)))return null;const e=n.summary.originalTerm,a=n.summary.newTerm,r=n.summary.originalTotalInterest,s=n.summary.newTotalInterest,l=n.summary.originalMonthlyPayment,o=a/e*100,i=s/r*100,m=n.summary.finalMonthlyPayment/l*100;return{labels:[t("loanTerm"),t("totalInterest"),t("monthlyPayment")],datasets:[{label:t("original"),data:[100,100,100],backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgb(255, 99, 132)",pointBackgroundColor:"rgb(255, 99, 132)"},{label:t("withEarlyPayments"),data:[o,i,m],backgroundColor:"rgba(54, 162, 235, 0.2)",borderColor:"rgb(54, 162, 235)",pointBackgroundColor:"rgb(54, 162, 235)"}]}}),[n,t]);return e.jsxs(e.Fragment,{children:[e.jsx(X.Suspense,{fallback:e.jsx(a,{visible:!0}),children:e.jsx(Le,{data:m,title:t("amortizationSchedule"),extraPaymentInfo:i})}),e.jsx(X.Suspense,{fallback:e.jsx(a,{visible:!0}),children:e.jsx(Ve,{data:u,title:t("monthlyPaymentBreakdown")})}),e.jsx(X.Suspense,{fallback:e.jsx(a,{visible:!0}),children:e.jsx(Be,{data:c,title:t("paymentDistribution")})}),e.jsx(X.Suspense,{fallback:e.jsx(a,{visible:!0}),children:e.jsx($e,{data:h,title:t("totalPaymentBreakdown")})}),d&&e.jsx(X.Suspense,{fallback:e.jsx(a,{visible:!0}),children:e.jsx(Be,{data:d,title:t("interestSavings")})}),y&&e.jsx(X.Suspense,{fallback:e.jsx(a,{visible:!0}),children:e.jsx(ze,{data:y,title:t("mortgageComparison")})})]})})),Ue=t=>{var a=n({},r(t));return e.jsx("svg",s(l({width:"28",height:"28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a),{children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.1 4.4a9.51 9.51 0 0 0-8.7 9.41 9.53 9.53 0 0 0 9.6 9.46c5 0 9.1-3.76 9.55-8.56h-7.29c-.5 0-.96 0-1.33-.05a2.04 2.04 0 0 1-1.23-.55c-.36-.36-.5-.8-.55-1.22-.05-.38-.05-.84-.05-1.34V4.4Zm1.8 0v7.1a9.97 9.97 0 0 0 .08 1.34l.19.04c.24.03.58.03 1.15.03h7.23A9.53 9.53 0 0 0 14.9 4.4Zm.06 8.43h.01Zm.02.01v.01Zm-12.38.97C2.6 7.6 7.72 2.56 14 2.56S25.4 7.59 25.4 13.8c0 6.23-5.12 11.26-11.4 11.26S2.6 20.04 2.6 13.81Z",fill:"currentColor"})}))},He={tableContainer:"_tableContainer_ln8oj_1",table:"_table_ln8oj_1",tableHead:"_tableHead_ln8oj_13",tableHeader:"_tableHeader_ln8oj_20",tableCell:"_tableCell_ln8oj_27",tableRow:"_tableRow_ln8oj_34",highlight:"_highlight_ln8oj_38",tabPanel:"_tabPanel_ln8oj_42"},Ye=({children:t,className:a})=>e.jsx("div",{className:`${He.tableContainer} ${a||""}`,children:e.jsx("table",{className:He.table,children:t})}),qe=({children:t})=>e.jsx("thead",{className:He.tableHead,children:t}),Ze=({children:t})=>e.jsx("tbody",{className:He.tableBody,children:t}),Ge=({children:t,highlight:a,style:n})=>e.jsx("tr",{className:`${He.tableRow} ${a?He.highlight:""}`,style:n,children:t}),Je=({children:t,header:a})=>a?e.jsx("th",{className:He.tableHeader,children:e.jsx(o,{weight:"1",children:t})}):e.jsx("td",{className:He.tableCell,children:e.jsx(i,{weight:"3",children:t})}),Ke=X.lazy((()=>be((()=>import("./PieChart-lz0HP0H8.js")),__vite__mapDeps([5,1,2,3,4])))),Qe=X.memo((()=>{const{height:t}=m(y),{t:n,formatCurrency:r,formatDate:s,formatNumber:l}=ve(),{amortizationResult:o}=Oe(),[i,p]=X.useState(1),[g,f]=X.useState(null),[x,b]=X.useState(!1);if(!o||0===o.schedule.length)return null;const P=o.schedule,j=X.useMemo((()=>"number"==typeof g?o.schedule[g]:null),[g]),v=X.useMemo((()=>j?{labels:[n("principal"),n("interest")],datasets:[{data:[j.principal,j.interest],backgroundColor:["rgba(75, 192, 192, 0.6)","rgba(255, 99, 132, 0.6)"],borderColor:["rgba(75, 192, 192, 1)","rgba(255, 99, 132, 1)"],borderWidth:1}]}:null),[g]),D=Math.ceil(P.length/12),S=12*(i-1),w=Math.min(S+12,P.length),T=P.slice(S,w);return e.jsxs(c,{children:[v&&e.jsx(d,{onOpenChange:e=>{e||f(null)},open:x,nested:!0,style:{height:.6*t},children:e.jsx(X.Suspense,{fallback:e.jsx(a,{visible:!0}),children:e.jsx(Ke,{data:v,title:n("paymentBreakdown")})})}),e.jsx(c.Header,{large:!0,children:n("showingPayments",{from:S+1,to:w,total:P.length})}),e.jsxs(Ye,{children:[e.jsx(qe,{children:e.jsxs(Ge,{children:[e.jsx(Je,{header:!0,children:"Â "}),e.jsx(Je,{header:!0,children:n("month")}),e.jsx(Je,{header:!0,children:n("date")}),e.jsx(Je,{header:!0,children:n("payment")}),e.jsx(Je,{header:!0,children:n("principal")}),e.jsx(Je,{header:!0,children:n("interest")}),e.jsx(Je,{header:!0,children:n("extraPayment")}),e.jsx(Je,{header:!0,children:n("balance")})]})}),e.jsx(Ze,{children:T.map(((t,a)=>e.jsxs(Ge,{highlight:Boolean(t.extraPayment),style:t.isRegularPayment?{backgroundColor:"rgba(75, 192, 192, 0.1)"}:void 0,children:[e.jsx(Je,{children:e.jsx(u,{size:"s",onClick:()=>(e=>{f(e),b(!0)})(S+a),children:e.jsx(Ue,{})})}),e.jsx(Je,{children:l(t.month)}),e.jsx(Je,{children:s(t.date)}),e.jsx(Je,{children:r(t.payment)}),e.jsx(Je,{children:r(t.principal)}),e.jsx(Je,{children:r(t.interest)}),e.jsx(Je,{children:t.extraPayment?e.jsxs("span",{children:[r(t.extraPayment),t.isRegularPayment&&e.jsx("span",{title:n("regularPayment"),style:{marginLeft:"4px",color:"rgba(75, 192, 192, 1)"},children:"*"})]}):t.isRegularPayment&&t.regularPaymentMessage?e.jsx("span",{title:t.regularPaymentMessage,style:{color:"rgba(255, 99, 132, 0.8)"},children:n("insufficientPayment")}):"-"}),e.jsx(Je,{children:r(t.balance)})]},t.month)))})]}),e.jsx(c.Footer,{centered:!0,children:e.jsx(h,{siblingCount:0,boundaryCount:1,page:i,count:D,onChange:(e,t)=>{p(t)}})})]})})),Xe=X.memo((()=>{const{t:t,formatCurrency:a,formatDate:n}=ve(),{mortgageResults:r,amortizationResult:s}=Oe();if(!r)return null;const l=X.useMemo((()=>!(!s||!s.schedule)&&s.schedule.some((e=>void 0!==e.extraPayment&&e.extraPayment>0))),[s]),{monthlyPayment:o,totalInterest:m,payoffDate:d}=r;return e.jsxs(c,{header:t("paymentSummary"),footer:l&&e.jsx(p,{readOnly:!0,before:e.jsx(i,{children:t("totalSavings")}),children:e.jsx(i,{style:{color:"var(--tgui--green)"},children:a(s.summary.totalSavings)})}),children:[e.jsx(p,{subtitle:l&&s?.summary.finalMonthlyPayment!==o&&e.jsxs(i,{style:{color:"var(--tgui--green)"},children:[t("originalPayment"),":",a(o)]}),subhead:t("monthlyPayment"),before:"ðŸ’°",readOnly:!0,children:e.jsx(i,{children:a(l&&s?.summary.finalMonthlyPayment!==o?s.summary.finalMonthlyPayment:o)})}),e.jsx(p,{subtitle:l&&e.jsxs(i,{style:{color:"var(--tgui--green)"},children:[t("savings"),":",a(s.summary.originalTotalInterest-s.summary.newTotalInterest)]}),subhead:t("totalInterest"),before:"ðŸ“ˆ",readOnly:!0,children:e.jsx(i,{children:a(l?s.summary.newTotalInterest:m)})}),e.jsx(p,{subtitle:l&&e.jsxs(i,{style:{color:"var(--tgui--green)"},children:[t("monthsSaved"),":",s.summary.originalTerm-s.summary.newTerm]}),subhead:t("loanTerm"),before:"â±ï¸",readOnly:!0,children:e.jsx(i,{children:l?`${Math.floor(s.summary.newTerm/12)} ${t("years")} ${s.summary.newTerm%12} ${t("months")}`:`${Math.floor(r.loanTerm)} ${t("years")}`})}),e.jsx(p,{subtitle:l&&e.jsxs(i,{style:{color:"var(--tgui--green)"},children:[t("actualPayoffDate"),":",n(s.schedule[s.schedule.length-1].date)]}),subhead:t("planPayoffDate"),before:"ðŸ",readOnly:!0,children:e.jsx(i,{children:n(d)})}),e.jsx(p,{subhead:t("paymentType"),before:"ðŸ’µ",readOnly:!0,children:e.jsx(i,{children:"annuity"===r.paymentType?t("annuityPayment"):t("differentiatedPayment")})})]})})),et=X.memo((({children:t})=>e.jsx("div",{className:He.tabPanel,children:t}))),tt=X.memo((({tabs:t,children:a,defaultTab:n})=>{const[r,s]=X.useState(n||t[0].id),l=ee.Children.toArray(a).find((e=>ee.isValidElement(e)&&e.props.id===r));return e.jsxs(e.Fragment,{children:[e.jsx(g,{children:t.map((t=>e.jsxs(f,{selected:t.id===r,onClick:()=>s(t.id),children:[t.label&&t.label,t.icon&&e.jsx(x,{children:t.icon})]},t.id)))}),l]})})),at=X.memo((({children:t,back:a=!0})=>{const n=te(),r=m(b.safeAreaInsets),s=m(b.contentSafeAreaInsets);return X.useEffect((()=>{if(a)return P.show(),P.onClick((()=>{n(-1)}));P.hide()}),[a]),e.jsx("div",{style:{paddingTop:r.top+s.top,paddingLeft:r.left,paddingRight:r.right},children:t})})),nt=[{id:"charts",icon:"ðŸ“Š "},{id:"schedule",icon:"ðŸ“…"}],rt=X.forwardRef(((t,a)=>{const{field:n,...r}=t,{isTouched:s,errors:l,isValidating:i}=n.state.meta;return e.jsxs(e.Fragment,{children:[e.jsx(v,{...r,ref:a,id:n.name,name:n.name,value:n.state.value,onBlur:n.handleBlur,onChange:e=>n.handleChange(e.target.value),status:l.length?"error":"default",after:i?e.jsx(D,{size:"s"}):r.after}),s&&l.length?e.jsx(o,{style:{color:"var(--tg-theme-destructive-text-color)",padding:"0 24px"},children:l.map((e=>e.message)).join(", ")}):null]})})),st=t=>e.jsx(oe,{...t,component:rt}),lt=X.forwardRef((t=>{const{field:a,options:n,...r}=t,{isTouched:s,errors:l}=a.state.meta;return e.jsxs(e.Fragment,{children:[e.jsx(S,{...r,id:a.name,name:a.name,value:a.state.value,onBlur:a.handleBlur,onChange:e=>a.handleChange(e.target.value),children:n.map((({value:t,label:a})=>e.jsx("option",{value:t,children:a},t)))}),s&&l.length?e.jsx(o,{style:{color:"var(--tg-theme-destructive-text-color)",padding:"0 24px"},children:l.join(", ")}):null]})})),ot={loanAmount:"",interestRate:"",loanTerm:"",startDate:(new Date).toISOString().split("T")[0],paymentType:"annuity",paymentDay:(new Date).getDate().toLocaleString(),earlyPayments:[],regularPayments:[]};const it=()=>{const{t:e,language:t}=ve(),a=X.useMemo((()=>(e=>(me.setErrorMap(((t,a)=>{const n=me.defaultErrorMap(t,a);switch(t.code){case me.ZodIssueCode.invalid_type:if("number"===t.expected)return{message:e("invalidNumber")};break;case me.ZodIssueCode.too_small:if("number"===t.type&&0===t.minimum)return{message:e("mustBePositive")}}return n})),{createNumberSchema:t=>{const{fieldName:a,min:n=0,max:r}=t;return me.string().transform((e=>{const t=ie(e);return parseFloat(t)})).refine((e=>!isNaN(e)),e("mustBeNumber",{field:e(a)})).refine((e=>e>n),e("mustBeGreaterThan",{field:e(a),value:n})).refine((e=>void 0===r||e<=r),void 0!==r?e("mustBeLessThan",{field:e(a),value:r}):"")},createDateSchema:t=>{const{fieldName:a}=t;return me.string().refine((e=>{const t=new Date(e);return!isNaN(t.getTime())}),e("invalidDate",{field:e(a)}))},createDateRangeRefinement:e=>{const{startField:t,endField:a,endIsOptional:n=!1}=e;return e=>{if(n&&!e[a])return!0;const r=new Date(e[t]);return new Date(e[a])>=r}},getDateRangeErrorMessage:t=>{const{startField:a,endField:n}=t;return{message:e("endDateAfterStart",{startField:e(a),endField:e(n)}),path:[n]}}}))(e)),[e,t]);return a},{fieldContext:mt,formContext:ct}=ce(),{useAppForm:dt,withForm:ut}=de({fieldContext:mt,formContext:ct,fieldComponents:{},formComponents:{}}),ht=ue({defaultValues:ot}),yt=()=>{const e=te(),{setLoanDetails:t,setEarlyPayments:a,setRegularPayments:n}=Oe(),{formSchema:r}=(()=>{const e=it(),t=me.object({loanAmount:e.createNumberSchema({fieldName:"loanAmount",min:0,max:1e9}),interestRate:e.createNumberSchema({fieldName:"interestRate",min:0,max:100}),loanTerm:e.createNumberSchema({fieldName:"loanTerm",min:0,max:50}),startDate:e.createDateSchema({fieldName:"startDate"}),paymentType:me.enum(["annuity","differentiated"]),paymentDay:me.string().transform((e=>parseInt(e))).refine((e=>!isNaN(e)),"validation.mustBeNumber").refine((e=>e>=1&&e<=31),"validation.dayOfMonth")}),a=me.object({date:e.createDateSchema({fieldName:"earlyPaymentDate"}),amount:e.createNumberSchema({fieldName:"earlyPaymentAmount",min:0}),type:me.enum(["reduceTerm","reducePayment"])}),n=me.object({id:me.string(),amount:e.createNumberSchema({fieldName:"regularPaymentAmount",min:0}),startMonth:e.createDateSchema({fieldName:"startMonth"}),endMonth:e.createDateSchema({fieldName:"endMonth"}),type:me.enum(["reduceTerm","reducePayment"])}).refine(e.createDateRangeRefinement({startField:"startMonth",endField:"endMonth"}),e.getDateRangeErrorMessage({startField:"startMonth",endField:"endMonth"})),r=me.object({amount:e.createNumberSchema({fieldName:"regularPaymentAmount",min:0}),startMonth:e.createDateSchema({fieldName:"startMonth"}),endMonth:e.createDateSchema({fieldName:"endMonth"}).optional(),type:me.enum(["reduceTerm","reducePayment"])}).refine(e.createDateRangeRefinement({startField:"startMonth",endField:"endMonth",endIsOptional:!0}),e.getDateRangeErrorMessage({startField:"startMonth",endField:"endMonth"})),s=me.object({loanAmount:t.shape.loanAmount,interestRate:t.shape.interestRate,loanTerm:t.shape.loanTerm,startDate:t.shape.startDate,paymentType:t.shape.paymentType,paymentDay:t.shape.paymentDay,earlyPayments:me.array(a.extend({id:me.string()})),regularPayments:me.array(n)});return{loanDetailsSchema:t,earlyPaymentSchema:a,regularPaymentSchema:n,regularEarlyPaymentSchema:r,formSchema:s}})();return X.useEffect((()=>{(async()=>{console.log(w.isSupported(),"isSupported");try{if(w.isSupported()){console.log("1");const e=await w.getKeys();console.log("2"),alert(e)}}catch(e){console.log(e,"erorororor")}})()}),[]),dt({...ht,validators:{onChange:r},onSubmit:async({value:r})=>{try{const l=(s=r,{loanAmount:parseFloat(ie(s.loanAmount)),interestRate:parseFloat(ie(s.interestRate)),loanTerm:parseFloat(ie(s.loanTerm)),startDate:s.startDate,paymentType:s.paymentType,paymentDay:parseInt(s.paymentDay),earlyPayments:s.earlyPayments.map((e=>({...e,amount:parseFloat(ie(e.amount))}))),regularPayments:s.regularPayments.map((e=>({...e,amount:parseFloat(ie(e.amount))})))});console.log(l,"loanDetails"),w.isSupported()&&(console.log("hi"),w.setItem("form",JSON.stringify(l)),console.log("hi2"));const{earlyPayments:o,regularPayments:i,...m}=l;t(m),a(o),n(i),e("result")}catch(l){console.error("Form submission error:",l)}var s}})},pt=ut({...ht,render:function({form:t}){const{t:a,language:n}=ve();return e.jsx(c,{header:a("loanDetails"),children:e.jsxs(j,{children:[e.jsx(t.Field,{name:"loanAmount",children:t=>e.jsx(st,{header:a("loanAmount"),placeholder:a("loanAmount"),field:t,inputMode:"decimal",maximumFractionDigits:2})}),e.jsx(t.Field,{name:"interestRate",children:t=>e.jsx(st,{header:a("interestRate"),placeholder:a("interestRate"),field:t,format:"percent",inputMode:"decimal",maximumFractionDigits:2})}),e.jsx(t.Field,{name:"loanTerm",children:t=>e.jsx(st,{format:"unit",unit:"year",locales:n,header:a("loanTerm"),placeholder:a("loanTerm"),field:t,inputMode:"numeric",maximumIntegerDigits:2})}),e.jsx(t.Field,{name:"startDate",children:t=>e.jsx(rt,{header:a("startDate"),placeholder:a("startDate"),field:t,type:"date"})}),e.jsx(t.Field,{name:"paymentType",children:t=>e.jsx(lt,{header:a("paymentType"),field:t,options:[{label:a("annuityPayment"),value:"annuity"},{label:a("differentiatedPayment"),value:"differentiated"}]})}),e.jsx(t.Field,{name:"paymentDay",children:t=>e.jsx(lt,{header:a("paymentDay"),field:t,options:Array.from({length:31},((e,t)=>t+1)).map((e=>({label:String(e),value:String(e)})))})})]})})}}),gt=X.memo(pt),ft=ut({...ht,render:function({form:t}){const[a,n]=X.useState(!1),{t:r}=ve();return e.jsx(c,{children:e.jsx(t.Field,{name:"earlyPayments",mode:"array",children:s=>e.jsxs(T,{expanded:a,onChange:()=>n((e=>!e)),children:[e.jsxs(T.Summary,{children:[r("earlyPayment"),Boolean(s.state.value.length)&&e.jsx(M,{large:!0,type:"dot",children:s.state.value.length})]}),e.jsx(T.Content,{style:{background:"transparent"},children:e.jsxs(c,{children:[s.state.value.map(((a,n)=>e.jsxs(j,{children:[e.jsx(t.Field,{name:`earlyPayments[${n}].amount`,children:t=>e.jsx(st,{header:r("earlyPaymentAmount"),placeholder:r("earlyPaymentAmount"),field:t,inputMode:"decimal",maximumFractionDigits:2})}),e.jsx(t.Field,{name:`earlyPayments[${n}].date`,children:t=>e.jsx(rt,{header:r("earlyPaymentDate"),placeholder:r("earlyPaymentDate"),field:t,type:"date"})}),e.jsx(t.Field,{name:`earlyPayments[${n}].type`,children:t=>e.jsx(lt,{header:r("earlyPaymentType"),field:t,options:[{label:r("typeReduceTerm"),value:"reduceTerm"},{label:r("typeReducePayment"),value:"reducePayment"}]})}),e.jsx(t.Subscribe,{selector:e=>[e.isFieldsValid,e.isValid],children:([t,a])=>e.jsx(A,{size:"s",mode:"outline",disabled:!t||!a,stretched:!0,onClick:()=>s.removeValue(n),children:r("remove")})})]},n))),e.jsx(t.Subscribe,{selector:e=>[e.isFieldsValid,e.isValid],children:([t,a])=>e.jsx(A,{disabled:!t||!a,stretched:!0,onClick:()=>s.pushValue({amount:"",date:(new Date).toISOString().split("T")[0],id:Date.now().toString(),type:"reduceTerm"}),children:r("addEarlyPayment")})})]})})]})})})}}),xt=X.memo(ft),bt=ut({...ht,render:function({form:t}){const[a,n]=X.useState(!1),{t:r}=ve();return e.jsx(c,{children:e.jsx(t.Field,{name:"regularPayments",mode:"array",children:s=>e.jsxs(T,{expanded:a,onChange:()=>n((e=>!e)),children:[e.jsxs(T.Summary,{children:[r("regularPayment"),Boolean(s.state.value.length)&&e.jsx(M,{large:!0,type:"dot",children:s.state.value.length})]}),e.jsx(T.Content,{style:{background:"transparent"},children:e.jsxs(c,{children:[s.state.value.map(((a,n)=>e.jsxs(j,{children:[e.jsx(t.Field,{name:`regularPayments[${n}].amount`,children:t=>e.jsx(st,{header:r("regularPaymentAmount"),placeholder:r("regularPaymentAmount"),field:t,inputMode:"decimal",maximumFractionDigits:2})}),e.jsx(t.Field,{name:`regularPayments[${n}].startMonth`,children:t=>e.jsx(rt,{header:r("startMonth"),placeholder:r("startMonth"),field:t,type:"date"})}),e.jsx(t.Field,{name:`regularPayments[${n}].endMonth`,children:t=>e.jsx(rt,{header:r("endMonth"),placeholder:r("endMonth"),field:t,type:"date"})}),e.jsx(t.Field,{name:`regularPayments[${n}].type`,children:t=>e.jsx(lt,{header:r("earlyPaymentType"),field:t,options:[{label:r("typeReduceTerm"),value:"reduceTerm"},{label:r("typeReducePayment"),value:"reducePayment"}]})}),e.jsx(t.Subscribe,{selector:e=>[e.isFieldsValid,e.isValid],children:([t,a])=>e.jsx(A,{size:"s",mode:"outline",disabled:!t||!a,stretched:!0,onClick:()=>s.removeValue(n),children:r("remove")})})]},n))),e.jsx(t.Subscribe,{selector:e=>[e.isFieldsValid,e.isValid],children:([t,a])=>e.jsx(A,{disabled:!t||!a,stretched:!0,onClick:()=>{const e=new Date,t=new Date(e);t.setMonth(e.getMonth()+1),s.pushValue({amount:"",startMonth:e.toISOString().split("T")[0],endMonth:t.toISOString().split("T")[0],id:Date.now().toString(),type:"reduceTerm"})},children:r("addRegularPayment")})})]})})]})})})}}),Pt=X.memo(bt),jt=X.memo((()=>{const{t:t}=ve(),a=yt();return e.jsx(at,{back:!1,children:e.jsxs(j,{Component:"form",onSubmit:e=>{e.preventDefault(),e.stopPropagation(),a.handleSubmit()},children:[e.jsx(gt,{form:a}),e.jsx(xt,{form:a}),e.jsx(Pt,{form:a}),e.jsx(c,{children:e.jsx(a.Subscribe,{selector:e=>[e.canSubmit,e.isSubmitting],children:([a,n])=>e.jsx(A,{type:"submit",stretched:!0,disabled:!a,loading:n,children:t("calculate")})})})]})})}));function vt(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function Dt(...e){return e.map((e=>"string"==typeof e?e:vt(e)?Dt(Object.entries(e).map((e=>e[1]&&e[0]))):Array.isArray(e)?Dt(...e):void 0)).filter(Boolean).join(" ")}function St(e,t){if(Array.isArray(t))return Dt(t.map((t=>St(e,t))));if(vt(t))return Dt(Object.entries(t).map((([t,a])=>a&&St(e,t))));const a=Dt(t);return a&&`${e}--${a}`}function wt(e,...t){return Dt(e,St(e,t))}function Tt(e){return[(...t)=>wt(e,t),(t,...a)=>wt(`${e}__${t}`,a)]}const[Mt,At]=Tt("rgb"),Ct=({color:t,className:a,...n})=>e.jsxs("span",{...n,className:Dt(Mt(),a),children:[e.jsx("i",{className:At("icon"),style:{backgroundColor:t}}),t]}),Rt=({className:t,onClick:a,to:n,...r})=>{const s=X.useCallback((e=>{let t;if(a?.(e),"string"==typeof n)t=n;else{const{search:e="",pathname:a="",hash:r=""}=n;t=`${a}?${e}#${r}`}const r=new URL(t,window.location.toString()),s=new URL(window.location.toString());(r.protocol!==s.protocol||r.host!==s.host)&&(e.preventDefault(),C(r.toString()))}),[n,a]);return e.jsx(ae,{...r,to:n,onClick:s,className:Dt(t,"link")})},[,_t]=Tt("display-data"),It=({header:t,rows:a})=>e.jsx(c,{header:t,children:a.map(((t,a)=>{let n;return n=void 0===t.value?e.jsx("i",{children:"empty"}):"type"in t?e.jsx(Rt,{to:t.value,children:"Open"}):"string"==typeof t.value?R(t.value)?e.jsx(Ct,{color:t.value}):t.value:"boolean"==typeof t.value?e.jsx(_,{checked:t.value,disabled:!0}):t.value,e.jsx(p,{className:_t("line"),subhead:t.title,readOnly:!0,multiline:!0,children:e.jsx("span",{className:_t("line-value"),children:n})},a)}))});function kt(e){return Object.entries(e).map((([e,t])=>({title:e,value:t})))}const Ft=[{path:"/",Component:jt},{path:"/result",Component:()=>e.jsx(at,{children:e.jsxs(j,{children:[e.jsx(Xe,{}),e.jsxs(tt,{tabs:nt,defaultTab:"charts",children:[e.jsx(et,{id:"charts",children:e.jsx(We,{})}),e.jsx(et,{id:"schedule",children:e.jsx(Qe,{})})]})]})}),title:"Mortage Result"},{path:"/init-data",Component:()=>{const t=m(I),a=m(k),n=X.useMemo((()=>{if(a&&t)return[{title:"raw",value:t},...Object.entries(a).reduce(((e,[t,a])=>(a instanceof Date?e.push({title:t,value:a.toISOString()}):a&&"object"==typeof a||e.push({title:t,value:a}),e)),[])]}),[a,t]),r=X.useMemo((()=>a&&a.user?kt(a.user):void 0),[a]),s=X.useMemo((()=>a&&a.receiver?kt(a.receiver):void 0),[a]),l=X.useMemo((()=>a?.chat?Object.entries(a.chat).map((([e,t])=>({title:e,value:t}))):void 0),[a]);return n?e.jsx(at,{children:e.jsxs(j,{children:[e.jsx(It,{header:"Init Data",rows:n}),r&&e.jsx(It,{header:"User",rows:r}),s&&e.jsx(It,{header:"Receiver",rows:s}),l&&e.jsx(It,{header:"Chat",rows:l})]})}):e.jsx(at,{children:e.jsx(F,{header:"Oops",description:"Application was launched with missing init data",children:e.jsx("img",{alt:"Telegram sticker",src:"https://xelene.me/telegram.gif",style:{display:"block",width:"144px",height:"144px"}})})})},title:"Init Data"},{path:"/theme-params",Component:()=>{const t=m(E.state);return e.jsx(at,{children:e.jsx(j,{children:e.jsx(It,{rows:Object.entries(t).map((([e,t])=>({title:e.replace(/[A-Z]/g,(e=>`_${e.toLowerCase()}`)).replace(/background/,"bg"),value:t})))})})})},title:"Theme Params"},{path:"/launch-params",Component:()=>{const a=X.useMemo((()=>t()),[]);return e.jsx(at,{children:e.jsx(j,{children:e.jsx(It,{rows:[{title:"tgWebAppPlatform",value:a.tgWebAppPlatform},{title:"tgWebAppShowSettings",value:a.tgWebAppShowSettings},{title:"tgWebAppVersion",value:a.tgWebAppVersion},{title:"tgWebAppBotInline",value:a.tgWebAppBotInline},{title:"tgWebAppStartParam",value:a.tgWebAppStartParam},{title:"tgWebAppData",type:"link",value:"/init-data"},{title:"tgWebAppThemeParams",type:"link",value:"/theme-params"}]})})})},title:"Launch Params"}],Et=X.memo((()=>e.jsx(ne,{children:e.jsxs(re,{children:[Ft.map((t=>e.jsx(se,{...t},t.path))),e.jsx(se,{path:"*",element:e.jsx(le,{to:"/"})})]})}))),Nt=()=>{const a=X.useMemo((()=>t()),[]),n=m(N);return e.jsx(O,{appearance:n?"dark":"light",platform:["macos","ios"].includes(a.tgWebAppPlatform)?"ios":"base",children:e.jsx(Et,{})})},Ot=X.memo((()=>e.jsx(fe,{fallback:ge,children:e.jsx(De,{children:e.jsx(Ne,{children:e.jsx(Nt,{})})})}))),Lt=X.memo((()=>{const a=t().tgWebAppPlatform,n=m(L.isDark);return e.jsx(O,{appearance:n?"dark":"light",platform:["macos","ios"].includes(a)?"ios":"base",children:e.jsx(F,{header:"Oops",description:"You are using too old Telegram client to run this application",children:e.jsx("img",{alt:"Telegram sticker",src:"https://xelene.me/telegram.gif",style:{display:"block",width:"144px",height:"144px"}})})})}));const Bt=pe.createRoot(document.getElementById("root"));try{const a=t(),{tgWebAppPlatform:n}=a,r=(a.tgWebAppStartParam||"").includes("platformer_debug")||!1;await async function(e){if(B(e.debug),V(),e.eruda&&be((async()=>{const{default:e}=await import("./eruda-BbdIQ3UH.js").then((e=>e.e));return{default:e}}),__vite__mapDeps([9,2])).then((({default:e})=>{e.init(),e.position({x:window.innerWidth-50,y:0})})),e.mockForMacOS){let e=!1;$({onEvent(a,n){if("web_app_request_theme"===a[0]){let a={};return e?a=G():(e=!0,a||=t().tgWebAppThemeParams),J("theme_changed",{theme_params:a})}if("web_app_request_safe_area"===a[0])return J("safe_area_changed",{left:0,top:0,right:0,bottom:0});n()}})}z(),L.mountSync(),await Promise.all([b.mount().then((()=>{P.isSupported()&&P.mount(),W(),U(),H(),Y.mount(),Y.disableVertical(),q.mount(),q.enableConfirmation(),Z()}))])}({debug:r,eruda:r&&["ios","android"].includes(n),mockForMacOS:"macos"===n}).then((()=>{Bt.render(e.jsx(Ot,{}))}))}catch(_t){console.log(_t),Bt.render(e.jsx(Lt,{}))}export{ve as u};
//# sourceMappingURL=index-D2ptFT4-.js.map
