import{a as e,d as t,r as i}from"./vendor-react-BsEvrc09.js";import{j as r}from"./vendor-telegram-DYpFzjZD.js";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=Array(t);i<t;i++)r[i]=e[i];return r}function s(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)({}).hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},a.apply(null,arguments)}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(l=function(){return!!e})()}function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach((function(t){s(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function d(e,t){if(null==e)return{};var i,r,n=function(e,t){if(null==e)return{};var i={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;i[r]=e[r]}return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)i=s[r],t.includes(i)||{}.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var r,n,s,a,o=[],l=!0,u=!1;try{if(s=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(r=s.call(i)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){u=!0,n=e}finally{try{if(!l&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(u)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){var i,r,n=t.minusSign,s=t.decimal,a=t.digits,o=t.signBackwards,l="[".concat(a,"]+([^").concat(s).concat(a,"][").concat(a,"]+)*"),u="[".concat(s,"][").concat(a,"]"),c="".concat(l).concat(u,"*"),d="".concat(u,"+"),f=l,p="[".concat(s,"]"),h=null!==(i=null===(r=RegExp("(".concat(c,"|").concat(d,"|").concat(f,"|").concat(p,")")).exec(e))||void 0===r?void 0:r[0])&&void 0!==i?i:"";return o&&RegExp("[".concat(a,"]?.*").concat(n)).test(e)?h+n:RegExp("".concat(n,".*[").concat(a,"]?")).test(e)?n+h:h}function v(e,t){var i=t.minusSign,r=t.decimal,n=t.digits;return e.replace(RegExp("[^\\".concat(i).concat(r).concat(n,"]"),"g"),"")}function m(e,t){var i,r,n=t.locales,s=t.options,a=t.localizedValues,o=t.resolvedOptions,l=o.maximumIntegerDigits,u=o.minimumFractionDigits,d=void 0===u?0:u,f=o.maximumFractionDigits,h=c({},s);h.style=h.format,h.useGrouping=h.groupDisplay,h.minimumFractionDigits=0,h.maximumFractionDigits=0,delete h.format,delete h.groupDisplay,delete h.maximumIntegerDigits;var v=p(e.split("."),2),m=v[0],g=v[1],y=void 0===g?"":g;m=m.replace(/^(-)?0+/,"$1"),m=null!==(i=null===(r=RegExp("-?\\d{0,".concat(null!=l?l:"","}")).exec(m))||void 0===r?void 0:r[0])&&void 0!==i?i:"";var b,S=/^-0?$/.test(m)?-0:BigInt(m),M="";if("percent"===o.format){var w,O,F="[".concat(a.digits,"]+([^").concat(a.digits,"][").concat(a.digits,"]+)*"),V=RegExp(F),E=new Intl.NumberFormat(n,c(c({},h),{},{style:"decimal"})).format(S);M=new Intl.NumberFormat(n,h).format(S).replace(V,null!==(w=null===(O=V.exec(E))||void 0===O?void 0:O[0])&&void 0!==w?w:"")}else M=new Intl.NumberFormat(n,h).format(S);if(M=M.replace(/\s/g," "),y.length<d&&(y+="0".repeat(d-y.length)),(void 0===f||f>0)&&(e.includes(".")||y.length>0)&&(M=M.replace(RegExp("([".concat(a.digits,"])([^").concat(a.digits,"]*)$")),"$1".concat(a.decimal,"$2")),y.length>0)){var D=(y=y.slice(0,f)).replace(/\d/g,(function(e){return a.digits[Number(e)]}));M=M.replace(RegExp("([".concat(a.decimal,"])([^").concat(a.digits,"]*)$")),"$1".concat(D,"$2"))}if(M.includes("+")?b="+":M.includes(a.minusSign)&&(b=a.minusSign),void 0!==b&&a.signBackwards){var j=(M=M.replace(RegExp("[‎؜\\".concat(b,"]"),"g"),"")).search(RegExp("[".concat(a.digits,"](?!.*[").concat(a.digits,"])")));-1!==j&&((M=M.slice(0,j+1)+b+M.slice(j+1)).startsWith("‏")||(M="‏".concat(M)))}return M}function g(e){var t=new Intl.NumberFormat(e,{useGrouping:!1,signDisplay:"always",minimumIntegerDigits:10,minimumFractionDigits:1,maximumFractionDigits:1}).format(-1234567890.1),i=t.startsWith("‎")||t.startsWith("؜"),r=i?t[1]:t[0],n=t[t.length-2],s=t.slice(i?2:1,-2);return{signBackwards:i,minusSign:r,decimal:n,digits:s=s[9]+s.slice(0,-1)}}function y(e,t){var i=t.minusSign,r=t.decimal,n=t.digits;return e.replace(RegExp(i,"g"),"-").replace(RegExp("[".concat(r,"]"),"g"),".").replace(RegExp("[".concat(n,"]"),"g"),(function(e){var t=n.indexOf(e);return-1!==t?t.toString():e}))}var b=["format","groupDisplay","maximumIntegerDigits"];function S(e,t){var i=t.format,r=t.groupDisplay,n=t.maximumIntegerDigits,s=d(t,b);if(void 0!==(n=void 0!==n?Number(n):void 0)&&Number.isNaN(n))throw new RangeError("maximumIntegerDigits value is out of range.");var a=new Intl.NumberFormat(e,c(c({},s),{},{style:"percent"===i?"decimal":i,useGrouping:r})).resolvedOptions(),o=a.style,l=a.useGrouping;a.format="percent"===i?"percent":o,a.groupDisplay=l;var u=void 0!==n&&n<a.minimumIntegerDigits;a.maximumIntegerDigits=u?a.minimumIntegerDigits:n;var f=a;return delete f.style,delete f.currencySign,delete f.useGrouping,delete f.minimumSignificantDigits,delete f.maximumSignificantDigits,delete f.compactDisplay,delete f.notation,delete f.numberingSystem,delete f.localeMatcher,delete f.roundingIncrement,delete f.roundingMode,delete f.roundingPriority,delete f.trailingZeroDisplay,a}var M=["locales"];function w(e,t){var i=g(t);return y(v(h(e,i),i),i).replace(/(.+)(-)$/,"$2$1").replace(/\.$/,"")}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t,i){return Object.defineProperty(e,"prototype",{writable:!1}),e}function V(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function D(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(D=function(){return!!e})()}function j(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function x(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?j(Object(i),!0).forEach((function(t){V(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):j(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function P(e){var t="function"==typeof Map?new Map:void 0;return P=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return function(e,t,i){if(D())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var n=new(e.bind.apply(e,r));return i&&A(n,i.prototype),n}(e,arguments,E(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),A(i,e)},P(e)}var k,B=function(){function e(t){var i;return O(this,e),(i=function(e,t,i){return t=E(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,D()?Reflect.construct(t,i||[],E(e).constructor):t.apply(e,i))}(this,e,[t])).name="SyntheticChangeError",i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(e,P(Error)),F(e)}(),T=["options"],$=["text","email","tel","search","url"],C=F((function e(t){var i=t.init,r=t.tracking;O(this,e);var n=new WeakMap;this.register=function(e){var t;if($.includes(e.type)){var s=null!==(t=e._wrapperState)&&void 0!==t?t:{},a=s.initialValue,o=void 0===a?"":a,l=s.controlled,u=void 0!==l&&l,c=i({initialValue:e.value||o,controlled:u}),d=c.value,f=c.options,p={value:d,options:f,fallbackOptions:f},h={id:-1,cachedId:-1},v={value:"",selectionStart:0,selectionEnd:0},m=Object.getOwnPropertyDescriptor("_valueTracker"in e?e:HTMLInputElement.prototype,"value");Object.defineProperty(e,"value",x(x({},m),{},{set:function(t){var i;v.value=t,null==m||null===(i=m.set)||void 0===i||i.call(e,t)}})),e.value=d;var g=function(){var t=function(){var i,r;v.selectionStart=null!==(i=e.selectionStart)&&void 0!==i?i:0,v.selectionEnd=null!==(r=e.selectionEnd)&&void 0!==r?r:0,h.id=window.setTimeout(t)};h.id=window.setTimeout(t)},y=function(){window.clearTimeout(h.id),h.id=-1,h.cachedId=-1},b=function(t){try{var i,n;if(h.cachedId===h.id)throw new B("The input selection has not been updated.");h.cachedId=h.id;var s=e.value,a=e.selectionStart,o=e.selectionEnd;if(null===a||null===o)throw new B("The selection attributes have not been initialized.");var l,u=v.value;if(void 0===t.inputType&&(v.selectionStart=0,v.selectionEnd=u.length),a>v.selectionStart?l="insert":a<=v.selectionStart&&a<v.selectionEnd?l="deleteBackward":a===v.selectionEnd&&s.length<u.length&&(l="deleteForward"),void 0===l||("deleteBackward"===l||"deleteForward"===l)&&s.length>u.length)throw new B("Input type detection error.");var c="",d=v.selectionStart,f=v.selectionEnd;if("insert"===l)c=s.slice(v.selectionStart,a);else{var m=u.length-s.length;d=a,f=a+m}p.value!==u?p.options=p.fallbackOptions:p.fallbackOptions=p.options;var g=p.options,y=r({inputType:l,previousValue:u,previousOptions:g,value:s,addedValue:c,changeStart:d,changeEnd:f,selectionStart:a,selectionEnd:o}),b=y.options,S=function(e,t){if(null==e)return{};var i,r,n=function(e,t){if(null==e)return{};var i={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;i[r]=e[r]}return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)i=s[r],t.includes(i)||{}.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}(y,T);e.value=S.value,e.setSelectionRange(S.selectionStart,S.selectionEnd),p.value=S.value,p.options=b,v.selectionStart=S.selectionStart,v.selectionEnd=S.selectionEnd,null===(i=e._valueTracker)||void 0===i||null===(n=i.setValue)||void 0===n||n.call(i,u)}catch(M){if(e.value=v.value,e.setSelectionRange(v.selectionStart,v.selectionEnd),t.preventDefault(),t.stopPropagation(),"SyntheticChangeError"!==M.name)throw M}};document.activeElement===e&&g(),e.addEventListener("focus",g),e.addEventListener("blur",y),e.addEventListener("input",b),n.set(e,{onFocus:g,onBlur:y,onInput:b})}},this.unregister=function(e){var t=n.get(e);void 0!==t&&(e.removeEventListener("focus",t.onFocus),e.removeEventListener("blur",t.onBlur),e.removeEventListener("input",t.onInput),n.delete(e))}}));k=C,Object.defineProperty(k.prototype,Symbol.toStringTag,{writable:!1,enumerable:!1,configurable:!0,value:"Input"});var R,_=["locales"],L=["locales"];function W(e,t){var i={minusSign:"-",decimal:".",digits:"\\d",signBackwards:!1},r=h(e,t),n=h(e.replace(",","."),i);return y(e=v(r||n,r?t:i),t)}var z=function(){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(e,t,i){return t=o(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,l()?Reflect.construct(t,i||[],o(e).constructor):t.apply(e,i))}(this,e,[{init:function(e){var t=e.initialValue,r=e.controlled,n=i.locales,s=d(i,_);if(!r&&t.length>0){var a=g(n),o=S(n,s),l=W(t,a);(l=l.replace(/(.+)(-)$/,"$2$1")).length>0&&(t=m(l,{locales:n,options:s,localizedValues:a,resolvedOptions:o}))}return{value:t,options:{locales:n,options:s}}},tracking:function(e){var t=e.inputType,r=e.previousValue,n=e.previousOptions,s=e.addedValue,a=e.changeStart,o=e.changeEnd,l=i.locales,u=d(i,L),c=g(n.locales),f=g(l),b=S(l,u),M=RegExp("^[".concat(f.minusSign,"]$")),w=RegExp("^[,".concat(f.decimal,"]$"));if(s=M.test(s)?s.replace(M,"-"):w.test(s)?s.replace(w,"."):W(s,f),"insert"===t&&!s)throw new B("The added value does not contain allowed characters.");var O=r.slice(0,a);O=y(O=v(O=h(O,c),c),c);var F=r.slice(o),V=O+s+(F=y(F=v(F=h(F,c),c),c));if(V=V.replace(/[.](?=.*[.])/g,""),f.signBackwards)V=V.replace(/[-](?=.*[-.\d])/g,"");else{var E=V.search(/[-.\d]/);V=V.replace(/[-]/g,(function(e,t){return-1!==E&&t>E?"":e}))}V=V.replace(/(.+)(-)$/,"$2$1");var D="-"===s&&a===o,j=r.includes(c.minusSign),x=V.includes("-");if(D&&j&&x&&(V=V.replace("-","")),!D||j||x||(V="-".concat(V)),/\..*0$/.test(V)){var A="([".concat(c.digits,"])([").concat(c.decimal,"])([").concat(c.digits,"]+)"),I=RegExp(A).exec(r);if(null!==I){var P,k=I[3],T=Number(I[5])+I[1].length+I[2].length,$=null!==(P=S(n.locales,n.options).minimumFractionDigits)&&void 0!==P?P:0;a>=T&&o<T+($||1)&&k.length<=($||1)&&(V=V.replace(/0+$/g,""))}}var C="deleteBackward"===t||"deleteForward"===t;if(C&&r.includes(c.decimal)&&!V.includes(".")){var R,_="[".concat(c.digits[0],"]*[^").concat(c.decimal).concat(c.digits,"]*$"),z="[^".concat(c.digits[0],"]"),N=null===(R=RegExp(_).exec(r))||void 0===R?void 0:R[0].replace(RegExp(z,"g"),"").length;void 0!==N&&void 0!==b.minimumFractionDigits&&(N>b.minimumFractionDigits&&(N=b.minimumFractionDigits),V=V.replace(RegExp("0{0,".concat(N,"}$")),""))}var G="",U=""===V||"-"===V||/^-?(\.0*)?$/.test(V);C&&U||(G=m(V,{locales:l,options:u,localizedValues:f,resolvedOptions:b}));var H=function(e){var t=e.localizedValues,i=e.previousLocalizedValues,r=e.resolvedOptions,n=e.inputType,s=e.value,a=e.previousValue,o=e.addedValue,l=e.changeStart,u=e.changeEnd;if(a.includes(t.decimal)&&"."===o){var c=s.indexOf(t.decimal);if(-1!==c){var d=c+1;return{start:d,end:d}}}if(a.includes(t.minusSign)&&"-"===o){var f=s.indexOf(t.minusSign);if(-1!==f){var h=f+(t.signBackwards?0:1);return{start:h,end:h}}}if("deleteBackward"===n||"deleteForward"===n){var v=p(a.split(i.decimal),1)[0];if(u<=v.length&&!RegExp("[".concat(i.digits.slice(1),"]")).test(v)){var m=v.indexOf(i.digits[0]),g=v.lastIndexOf(i.digits[0]);if(-1!==m&&-1!==g){var y=g+1;if((l!==m||u!==y)&&u>m&&u<=y)return{start:m,end:y}}}}for(var b=void 0!==r.maximumIntegerDigits?Number(r.maximumIntegerDigits):void 0,S=s.length,M=0,w=0,O=!1;w<l;w++){var F=i.digits.includes(a[w]),V=a[w]===i.decimal;!O&&(V||F&&a[w]!==i.digits[0])&&(O=!0),O&&(V||F)&&(M+=1)}if("insert"===n){var E=a.slice(0,l),D=a.indexOf(i.decimal),j=p(E.replace(RegExp("[^".concat(i.decimal).concat(i.digits,"]"),"g"),"").replace(RegExp("^".concat(i.digits[0],"+"),"g"),"").split(i.decimal),2),x=j[0],A=j[1],I=void 0===A?"":A,P=-1!==D&&u<=D?"\\.":"\\.(?=.*\\.)",k=o.replace(RegExp("-|".concat(P),"g"),""),B=k.includes("."),T=p(k.split("."),2),$=T[0],C=T[1],R=void 0===C?"":C;if(-1!==D&&l>D)if(B){M-=1;var _=x+I;void 0!==b&&_.length>b&&(M=b,x=_.slice(0,b))}else R=$,$="";var L="[".concat(i.decimal).concat(i.digits.slice(1),"]");RegExp(L).test(E)||($=$.replace(/^0+/g,""));var W=void 0!==b?b-x.length:void 0;M+=($.slice(0,W)+(B?".":"")+R).replace(RegExp("[^\\.".concat(t.decimal,"\\d").concat(t.digits,"]+"),"g"),"").length}for(var z=0,N=!1,G=0;z<s.length;z++){var U=t.digits.includes(s[z]),H=s[z]===t.decimal;if(!N&&(H||U&&s[z]!==t.digits[0])&&(N=!0),N&&G>=M){S=z;break}N&&(H||U)&&(G+=1)}if("deleteForward"===n){var K,Z="\\".concat(t.minusSign),q="^.{".concat(S,"}[^").concat(t.decimal).concat(t.digits,"]*[").concat(Z).concat(t.decimal).concat(t.digits,"]"),J=null===(K=RegExp(q).exec(s))||void 0===K?void 0:K[0].length;void 0!==J&&(S=J-1)}else{var Q,X="deleteBackward"===n?"\\".concat(t.minusSign):"",Y="[".concat(X).concat(t.decimal).concat(t.digits,"][^").concat(t.decimal).concat(t.digits,"]*.{").concat(s.length-S,"}$"),ee=null===(Q=RegExp(Y).exec(s))||void 0===Q?void 0:Q.index;void 0!==ee&&(S=ee+1)}var te="[\\".concat(t.minusSign).concat(t.decimal).concat(t.digits.slice(1),"]"),ie="[\\".concat(t.minusSign).concat(t.decimal).concat(t.digits,"][^").concat(t.decimal).concat(t.digits,"]*$"),re=s.search(RegExp(te)),ne=s.search(RegExp(ie));return-1!==re&&S<re?S=re:-1!==ne&&S>ne+1&&(S=ne+1),{start:S,end:S}}({localizedValues:f,previousLocalizedValues:c,resolvedOptions:b,inputType:t,value:G,previousValue:r,addedValue:s,changeStart:a,changeEnd:o});return{value:G,selectionStart:H.start,selectionEnd:H.end,options:{locales:l,options:u}}}}])).format=function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.locales,r=d(t,M),n=g(i),s=S(i,r);return m(e.toString(),{locales:i,options:r,localizedValues:n,resolvedOptions:s})}(e,i)},t.unformat=function(e){return w(e,i.locales)},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(e,C),function(e){return Object.defineProperty(e,"prototype",{writable:!1}),e}(e)}();function N(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.locales,r=t.format,n=t.currency,s=t.currencyDisplay,a=t.unit,o=t.unitDisplay,l=t.signDisplay,u=t.groupDisplay,c=t.minimumIntegerDigits,d=t.maximumIntegerDigits,f=t.minimumFractionDigits,p=t.maximumFractionDigits,h=e.useRef(null),v=e.useRef({locales:i,format:r,currency:n,currencyDisplay:s,unit:a,unitDisplay:o,signDisplay:l,groupDisplay:u,minimumIntegerDigits:c,maximumIntegerDigits:d,minimumFractionDigits:f,maximumFractionDigits:p});return v.current.locales=i,v.current.format=r,v.current.currency=n,v.current.currencyDisplay=s,v.current.unit=a,v.current.unitDisplay=o,v.current.signDisplay=l,v.current.groupDisplay=u,v.current.minimumIntegerDigits=c,v.current.maximumIntegerDigits=d,v.current.minimumFractionDigits=f,v.current.maximumFractionDigits=p,e.useMemo((function(){return function(e,t){return new Proxy(e,{set:function(i,r,n){return"current"===r&&(n!==e.current&&(null!==e.current&&t.unregister(e.current),null!==n&&t.register(n)),i[r]=n,!0)}})}(h,new z(v.current))}),[])}R=z,Object.defineProperty(R.prototype,Symbol.toStringTag,{writable:!1,enumerable:!1,configurable:!0,value:"NumberFormat"});var G=["component","locales","format","currency","currencyDisplay","unit","unitDisplay","signDisplay","groupDisplay","minimumIntegerDigits","maximumIntegerDigits","minimumFractionDigits","maximumFractionDigits"];var U=e.forwardRef((function(i,r){var n=i.component,s=i.locales,o=i.format,l=i.currency,u=i.currencyDisplay,c=i.unit,f=i.unitDisplay,p=i.signDisplay,h=i.groupDisplay,v=i.minimumIntegerDigits,m=i.maximumIntegerDigits,g=i.minimumFractionDigits,y=i.maximumFractionDigits,b=d(i,G),S=function(t,i){return e.useCallback((function(e){t.current=e,"function"==typeof i?i(e):"object"===I(i)&&null!==i&&(i.current=e)}),[t,i])}(N({locales:s,format:o,currency:l,currencyDisplay:u,unit:c,unitDisplay:f,signDisplay:p,groupDisplay:h,minimumIntegerDigits:v,maximumIntegerDigits:m,minimumFractionDigits:g,maximumFractionDigits:y}),r);return n?t.createElement(n,a({ref:S},b)):t.createElement("input",a({ref:S},b))}));const H=new WeakMap,K=new WeakMap,Z={current:[]};let q=!1,J=0;const Q=new Set,X=new Map;function Y(e){const t=Array.from(e).sort(((e,t)=>e instanceof se&&e.options.deps.includes(t)?1:t instanceof se&&t.options.deps.includes(e)?-1:0));for(const i of t){if(Z.current.includes(i))continue;Z.current.push(i),i.recompute();const e=K.get(i);if(e)for(const t of e){const e=H.get(t);e&&Y(e)}}}function ee(e){e.listeners.forEach((t=>t({prevVal:e.prevState,currentVal:e.state})))}function te(e){e.listeners.forEach((t=>t({prevVal:e.prevState,currentVal:e.state})))}function ie(e){if(J>0&&!X.has(e)&&X.set(e,e.prevState),Q.add(e),!(J>0||q))try{for(q=!0;Q.size>0;){const e=Array.from(Q);Q.clear();for(const t of e){const e=X.get(t)??t.prevState;t.prevState=e,ee(t)}for(const t of e){const e=H.get(t);e&&(Z.current.push(t),Y(e))}for(const t of e){const e=H.get(t);if(e)for(const t of e)te(t)}}}finally{q=!1,Z.current=[],X.clear()}}function re(e){J++;try{e()}finally{if(J--,0===J){const e=Array.from(Q)[0];e&&ie(e)}}}class ne{constructor(e,t){this.listeners=new Set,this.subscribe=e=>{var t,i;this.listeners.add(e);const r=null==(i=null==(t=this.options)?void 0:t.onSubscribe)?void 0:i.call(t,e,this);return()=>{this.listeners.delete(e),null==r||r()}},this.setState=e=>{var t,i,r;this.prevState=this.state,this.state=(null==(t=this.options)?void 0:t.updateFn)?this.options.updateFn(this.prevState)(e):e(this.prevState),null==(r=null==(i=this.options)?void 0:i.onUpdate)||r.call(i),ie(this)},this.prevState=e,this.state=e,this.options=t}}class se{constructor(e){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const e=[],t=[];for(const i of this.options.deps)e.push(i.prevState),t.push(i.state);return this.lastSeenDepValues=t,{prevDepVals:e,currDepVals:t,prevVal:this.prevState??void 0}},this.recompute=()=>{var e,t;this.prevState=this.state;const{prevDepVals:i,currDepVals:r,prevVal:n}=this.getDepVals();this.state=this.options.fn({prevDepVals:i,currDepVals:r,prevVal:n}),null==(t=(e=this.options).onUpdate)||t.call(e)},this.checkIfRecalculationNeededDeeply=()=>{for(const r of this.options.deps)r instanceof se&&r.checkIfRecalculationNeededDeeply();let e=!1;const t=this.lastSeenDepValues,{currDepVals:i}=this.getDepVals();for(let r=0;r<i.length;r++)if(i[r]!==t[r]){e=!0;break}e&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const e of this._subscriptions)e()}),this.subscribe=e=>{var t,i;this.listeners.add(e);const r=null==(i=(t=this.options).onSubscribe)?void 0:i.call(t,e,this);return()=>{this.listeners.delete(e),null==r||r()}},this.options=e,this.state=e.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(e=this.options.deps){for(const t of e)if(t instanceof se)t.registerOnGraph(),this.registerOnGraph(t.options.deps);else if(t instanceof ne){let e=H.get(t);e||(e=new Set,H.set(t,e)),e.add(this);let i=K.get(this);i||(i=new Set,K.set(this,i)),i.add(t)}}unregisterFromGraph(e=this.options.deps){for(const t of e)if(t instanceof se)this.unregisterFromGraph(t.options.deps);else if(t instanceof ne){const e=H.get(t);e&&e.delete(this);const i=K.get(this);i&&i.delete(t)}}}function ae(e,t){return"function"==typeof e?e(t):e}function oe(e,t){return me(t).reduce(((e,t)=>null===e?null:void 0!==e?e[t]:void 0),e)}function le(e,t,i){const r=me(t);return function e(t){if(!r.length)return ae(i,t);const n=r.shift();if("string"==typeof n||"number"==typeof n&&!Array.isArray(t))return"object"==typeof t?(null===t&&(t={}),{...t,[n]:e(t[n])}):{[n]:e()};if(Array.isArray(t)&&"number"==typeof n){const i=t.slice(0,n);return[...i.length?i:new Array(n),e(t[n]),...t.slice(n+1)]}return[...new Array(n),e()]}(e)}const ue=/^(\d*)$/gm,ce=/\.(\d*)\./gm,de=/^(\d*)\./gm,fe=/\.(\d*$)/gm,pe=/\.{2,}/gm,he="__int__",ve=`${he}$1`;function me(e){if(Array.isArray(e))return[...e];if("string"!=typeof e)throw new Error("Path must be a string.");return e.replace(/\[/g,".").replace(/\]/g,"").replace(ue,ve).replace(ce,`.${ve}.`).replace(de,`${ve}.`).replace(fe,`.${ve}`).replace(pe,".").split(".").map((e=>0===e.indexOf(he)?parseInt(e.substring(he.length),10):e))}function ge(e,t){const{asyncDebounceMs:i}=t,{onChangeAsync:r,onBlurAsync:n,onSubmitAsync:s,onBlurAsyncDebounceMs:a,onChangeAsyncDebounceMs:o}=t.validators||{},l=i??0,u={cause:"change",validate:r,debounceMs:o??l},c={cause:"blur",validate:n,debounceMs:a??l},d={cause:"submit",validate:s,debounceMs:0},f=e=>({...e,debounceMs:0});switch(e){case"submit":return[f(u),f(c),d];case"blur":return[c];case"change":return[u];default:return[]}}function ye(e,t){const{onChange:i,onBlur:r,onSubmit:n,onMount:s}=t.validators||{},a={cause:"change",validate:i},o={cause:"blur",validate:r},l={cause:"submit",validate:n},u={cause:"mount",validate:s},c={cause:"server",validate:()=>{}};switch(e){case"mount":return[u];case"submit":return[a,o,l,c];case"server":return[c];case"blur":return[o,c];default:return[a,c]}}const be=e=>!!e&&"object"==typeof e&&"fields"in e;function Se(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,r]of e)if(!t.has(i)||!Object.is(r,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!1;for(let r=0;r<i.length;r++)if(!Object.prototype.hasOwnProperty.call(t,i[r])||!Object.is(e[i[r]],t[i[r]]))return!1;return!0}const Me=e=>{const t=function(e){const t=new Map;for(const i of e){const e=[...i.path??[]].map((e=>{const t="object"==typeof e?e.key:e;return"number"==typeof t?`[${t}]`:t})).join(".").replace(/\.\[/g,"[");t.set(e,(t.get(e)??[]).concat(i))}return Object.fromEntries(t)}(e);return{form:t,fields:t}},we={validate({value:e,validationSource:t},i){const r=i["~standard"].validate(e);if(r instanceof Promise)throw new Error("async function passed to sync validator");if(r.issues)return"field"===t?r.issues:Me(r.issues)},async validateAsync({value:e,validationSource:t},i){const r=await i["~standard"].validate(e);if(r.issues)return"field"===t?r.issues:Me(r.issues)}},Oe=e=>!!e&&"~standard"in e,Fe={isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,errors:[],errorMap:{}};function Ve(e){function t(e,t){return`${e}[${t}]`}function i(t,i){("up"===i?t:[...t].reverse()).forEach((t=>{const n=function(e,t){return e.replace(/\[(\d+)\]/,((e,i)=>{const r=parseInt(i,10);return`[${"up"===t?r+1:Math.max(0,r-1)}]`}))}(t.toString(),i),s=e.getFieldMeta(n);s?e.setFieldMeta(t,s):e.setFieldMeta(t,r())}))}const r=()=>Fe,n=(n,s,a)=>{i(n,"down"),n.forEach((i=>{i.toString().startsWith(t(s,a))&&e.setFieldMeta(i,r())}))},s=e=>{i(e,"up")},a=(r,n,s,a)=>{const o=new Map(Object.keys(e.fieldInfo).filter((e=>e.startsWith(t(n,s)))).map((t=>[t,e.getFieldMeta(t)])));i(r,s<a?"up":"down"),Object.keys(e.fieldInfo).filter((e=>e.startsWith(t(n,a)))).forEach((i=>{const r=i.replace(t(n,a),t(n,s)),l=o.get(r);l&&e.setFieldMeta(i,l)}))},o=(i,r,n,s)=>{i.forEach((i=>{if(!i.toString().startsWith(t(r,n)))return;const a=i.toString().replace(t(r,n),t(r,s)),[o,l]=[e.getFieldMeta(i),e.getFieldMeta(a)];o&&e.setFieldMeta(a,o),l&&e.setFieldMeta(i,l)}))};return{handleArrayFieldMetaShift:function(i,r,l,u){const c=function(i,r,n,s){const a=[t(i,r)];if("swap"===n)a.push(t(i,s));else if("move"===n){const[e,n]=[Math.min(r,s),Math.max(r,s)];for(let r=e;r<=n;r++)a.push(t(i,r))}else{const n=e.getFieldValue(i),s=Array.isArray(n)?n.length:0;for(let e=r+1;e<s;e++)a.push(t(i,e))}return Object.keys(e.fieldInfo).filter((e=>a.some((t=>e.startsWith(t)))))}(i,r,l,u);({insert:()=>n(c,i,r),remove:()=>s(c),swap:()=>void 0!==u&&o(c,i,r,u),move:()=>void 0!==u&&a(c,i,r,u)})[l]()}}}function Ee(e){return{values:e.values??{},errorMap:e.errorMap??{},fieldMetaBase:e.fieldMetaBase??{},isSubmitted:e.isSubmitted??!1,isSubmitting:e.isSubmitting??!1,isValidating:e.isValidating??!1,submissionAttempts:e.submissionAttempts??0,isSubmitSuccessful:e.isSubmitSuccessful??!1,validationMetaMap:e.validationMetaMap??{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0}}}class De{constructor(e){var t;this.options={},this.fieldInfo={},this.prevTransformArray=[],this.cumulativeFieldsErrorMap={},this.mount=()=>{const e=this.fieldMetaDerived.mount(),t=this.store.mount(),i=()=>{e(),t()},{onMount:r}=this.options.validators||{};return r?(this.validateSync("mount"),i):i},this.update=e=>{var t,i;if(!e)return;const r=this.options;this.options=e;const n=!!(null==(i=null==(t=e.transform)?void 0:t.deps)?void 0:i.some(((e,t)=>e!==this.prevTransformArray[t]))),s=e.defaultValues&&!Se(e.defaultValues,r.defaultValues)&&!this.state.isTouched,a=!Se(e.defaultState,r.defaultState)&&!this.state.isTouched;(s||a||n)&&re((()=>{this.baseStore.setState((()=>Ee(Object.assign({},this.state,a?e.defaultState:{},s?{values:e.defaultValues}:{},n?{_force_re_eval:!this.state._force_re_eval}:{}))))}))},this.reset=(e,t)=>{const{fieldMeta:i}=this.state,r=this.resetFieldMeta(i);e&&!(null==t?void 0:t.keepDefaultValues)&&(this.options={...this.options,defaultValues:e}),this.baseStore.setState((()=>{var t;return Ee({...this.options.defaultState,values:e??this.options.defaultValues??(null==(t=this.options.defaultState)?void 0:t.values),fieldMetaBase:r})}))},this.validateAllFields=async e=>{const t=[];re((()=>{Object.values(this.fieldInfo).forEach((i=>{if(!i.instance)return;const r=i.instance;t.push(Promise.resolve().then((()=>r.validate(e,{skipFormValidation:!0})))),i.instance.state.meta.isTouched||i.instance.setMeta((e=>({...e,isTouched:!0})))}))}));return(await Promise.all(t)).flat()},this.validateArrayFieldsStartingFrom=async(e,t,i)=>{const r=this.getFieldValue(e),n=Array.isArray(r)?Math.max(r.length-1,0):null,s=[`${e}[${t}]`];for(let l=t+1;l<=(n??0);l++)s.push(`${e}[${l}]`);const a=Object.keys(this.fieldInfo).filter((e=>s.some((t=>e.startsWith(t))))),o=[];re((()=>{a.forEach((e=>{o.push(Promise.resolve().then((()=>this.validateField(e,i))))}))}));return(await Promise.all(o)).flat()},this.validateField=(e,t)=>{var i;const r=null==(i=this.fieldInfo[e])?void 0:i.instance;return r?(r.state.meta.isTouched||r.setMeta((e=>({...e,isTouched:!0}))),r.validate(t)):[]},this.validateSync=e=>{const t=ye(e,this.options);let i=!1;const r={};return re((()=>{var n;for(const e of t){if(!e.validate)continue;const t=this.runValidator({validate:e.validate,value:{value:this.state.values,formApi:this,validationSource:"form"},type:"validate"}),{formError:s,fieldErrors:a}=je(t),o=xe(e.cause);if(a)for(const[e,i]of Object.entries(a)){const t={...this.cumulativeFieldsErrorMap[e]||{},[o]:i};r[e]=t,this.cumulativeFieldsErrorMap[e]=t;const n=this.getFieldMeta(e);n&&n.errorMap[o]!==i&&this.setFieldMeta(e,(e=>({...e,errorMap:{...e.errorMap,[o]:i}})))}for(const e of Object.keys(this.cumulativeFieldsErrorMap)){const t=this.getFieldMeta(e);(null==t?void 0:t.errorMap[o])&&!(null==(n=r[e])?void 0:n[o])&&(this.cumulativeFieldsErrorMap[e]={...this.cumulativeFieldsErrorMap[e],[o]:void 0},this.setFieldMeta(e,(e=>({...e,errorMap:{...e.errorMap,[o]:void 0}}))))}this.state.errorMap[o]!==s&&this.baseStore.setState((e=>({...e,errorMap:{...e.errorMap,[o]:s}}))),(s||a)&&(i=!0)}const s=xe("submit");this.state.errorMap[s]&&"submit"!==e&&!i&&this.baseStore.setState((e=>({...e,errorMap:{...e.errorMap,[s]:void 0}})))})),{hasErrored:i,fieldsErrorMap:r}},this.validateAsync=async e=>{const t=ge(e,this.options);this.state.isFormValidating||this.baseStore.setState((e=>({...e,isFormValidating:!0})));const i=[];let r;for(const a of t){if(!a.validate)continue;const e=xe(a.cause),t=this.state.validationMetaMap[e];null==t||t.lastAbortController.abort();const n=new AbortController;this.state.validationMetaMap[e]={lastAbortController:n},i.push(new Promise((async e=>{let t;try{t=await new Promise(((e,t)=>{setTimeout((async()=>{if(n.signal.aborted)return e(void 0);try{e(await this.runValidator({validate:a.validate,value:{value:this.state.values,formApi:this,validationSource:"form",signal:n.signal},type:"validateAsync"}))}catch(G){t(G)}}),a.debounceMs)}))}catch(G){t=G}const{formError:i,fieldErrors:s}=je(t);s&&(r=r?{...r,...s}:s);const o=xe(a.cause);if(r)for(const[n,a]of Object.entries(r)){const e=this.getFieldMeta(n);e&&e.errorMap[o]!==a&&this.setFieldMeta(n,(e=>({...e,errorMap:{...e.errorMap,[o]:a}})))}this.baseStore.setState((e=>({...e,errorMap:{...e.errorMap,[o]:i}}))),e(r?{fieldErrors:r,errorMapKey:o}:void 0)})))}let n=[];const s={};if(i.length){n=await Promise.all(i);for(const e of n)if(null==e?void 0:e.fieldErrors){const{errorMapKey:t}=e;for(const[i,r]of Object.entries(e.fieldErrors)){const e={...s[i]||{},[t]:r};s[i]=e}}}return this.baseStore.setState((e=>({...e,isFormValidating:!1}))),s},this.validate=e=>{const{hasErrored:t,fieldsErrorMap:i}=this.validateSync(e);return t&&!this.options.asyncAlways?i:this.validateAsync(e)},this.getFieldValue=e=>oe(this.state.values,e),this.getFieldMeta=e=>this.state.fieldMeta[e],this.getFieldInfo=e=>{var t;return(t=this.fieldInfo)[e]||(t[e]={instance:null,validationMetaMap:{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0}})},this.setFieldMeta=(e,t)=>{this.baseStore.setState((i=>({...i,fieldMetaBase:{...i.fieldMetaBase,[e]:ae(t,i.fieldMetaBase[e])}})))},this.resetFieldMeta=e=>Object.keys(e).reduce(((e,t)=>(e[t]=Fe,e)),{}),this.setFieldValue=(e,t,i)=>{const r=(null==i?void 0:i.dontUpdateMeta)??!1;re((()=>{r||this.setFieldMeta(e,(e=>({...e,isTouched:!0,isDirty:!0,errorMap:{...null==e?void 0:e.errorMap,onMount:void 0}}))),this.baseStore.setState((i=>({...i,values:le(i.values,e,t)})))}))},this.deleteField=e=>{const t=Object.keys(this.fieldInfo).filter((t=>{const i=e.toString();return t!==i&&t.startsWith(i)})),i=[...t,e];this.baseStore.setState((e=>{const t={...e};return i.forEach((e=>{t.values=function(e,t){const i=me(t);return function e(t){if(!t)return;if(1===i.length){const e=i[0];if(Array.isArray(t)&&"number"==typeof e)return t.filter(((t,i)=>i!==e));const{[e]:r,...n}=t;return n}const r=i.shift();if("string"==typeof r&&"object"==typeof t)return{...t,[r]:e(t[r])};if("number"==typeof r&&Array.isArray(t)){if(r>=t.length)return t;const i=t.slice(0,r);return[...i.length?i:new Array(r),e(t[r]),...t.slice(r+1)]}throw new Error("It seems we have created an infinite loop in deleteBy. ")}(e)}(t.values,e),delete this.fieldInfo[e],delete t.fieldMetaBase[e]})),t}))},this.pushFieldValue=(e,t,i)=>{this.setFieldValue(e,(e=>[...Array.isArray(e)?e:[],t]),i),this.validateField(e,"change")},this.insertFieldValue=async(e,t,i,r)=>{this.setFieldValue(e,(e=>[...e.slice(0,t),i,...e.slice(t)]),r),await this.validateField(e,"change"),Ve(this).handleArrayFieldMetaShift(e,t,"insert"),await this.validateArrayFieldsStartingFrom(e,t,"change")},this.replaceFieldValue=async(e,t,i,r)=>{this.setFieldValue(e,(e=>e.map(((e,r)=>r===t?i:e))),r),await this.validateField(e,"change"),await this.validateArrayFieldsStartingFrom(e,t,"change")},this.removeFieldValue=async(e,t,i)=>{const r=this.getFieldValue(e),n=Array.isArray(r)?Math.max(r.length-1,0):null;if(this.setFieldValue(e,(e=>e.filter(((e,i)=>i!==t))),i),Ve(this).handleArrayFieldMetaShift(e,t,"remove"),null!==n){const t=`${e}[${n}]`;this.deleteField(t)}await this.validateField(e,"change"),await this.validateArrayFieldsStartingFrom(e,t,"change")},this.swapFieldValues=(e,t,i,r)=>{this.setFieldValue(e,(e=>{const r=e[t],n=e[i];return le(le(e,`${t}`,n),`${i}`,r)}),r),Ve(this).handleArrayFieldMetaShift(e,t,"swap",i),this.validateField(e,"change"),this.validateField(`${e}[${t}]`,"change"),this.validateField(`${e}[${i}]`,"change")},this.moveFieldValues=(e,t,i,r)=>{this.setFieldValue(e,(e=>(e.splice(i,0,e.splice(t,1)[0]),e)),r),Ve(this).handleArrayFieldMetaShift(e,t,"move",i),this.validateField(e,"change"),this.validateField(`${e}[${t}]`,"change"),this.validateField(`${e}[${i}]`,"change")},this.resetField=e=>{this.baseStore.setState((t=>({...t,fieldMetaBase:{...t.fieldMetaBase,[e]:Fe},values:{...t.values,[e]:this.options.defaultValues&&this.options.defaultValues[e]}})))},this.getAllErrors=()=>({form:{errors:this.state.errors,errorMap:this.state.errorMap},fields:Object.entries(this.state.fieldMeta).reduce(((e,[t,i])=>(Object.keys(i).length&&i.errors.length&&(e[t]={errors:i.errors,errorMap:i.errorMap}),e)),{})}),this.parseValuesWithSchema=e=>we.validate({value:this.state.values,validationSource:"form"},e),this.parseValuesWithSchemaAsync=e=>we.validateAsync({value:this.state.values,validationSource:"form"},e),this.baseStore=new ne(Ee({...null==e?void 0:e.defaultState,values:(null==e?void 0:e.defaultValues)??(null==(t=null==e?void 0:e.defaultState)?void 0:t.values)})),this.fieldMetaDerived=new se({deps:[this.baseStore],fn:({prevDepVals:e,currDepVals:t,prevVal:i})=>{var r;const n=i,s=null==e?void 0:e[0],a=t[0];let o=0;const l={};for(const u of Object.keys(a.fieldMetaBase)){const e=a.fieldMetaBase[u],t=null==s?void 0:s.fieldMetaBase[u],i=null==n?void 0:n[u];let c=null==i?void 0:i.errors;if(!t||e.errorMap!==t.errorMap){c=Object.values(e.errorMap??{}).filter((e=>void 0!==e));const t=null==(r=this.getFieldInfo(u))?void 0:r.instance;t&&!t.options.disableErrorFlat&&(c=null==c?void 0:c.flat(1))}const d=!e.isDirty;i&&i.isPristine===d&&i.errors===c&&e===t?(l[u]=i,o++):l[u]={...e,errors:c,isPristine:d}}return Object.keys(a.fieldMetaBase).length&&n&&o===Object.keys(a.fieldMetaBase).length?n:l}}),this.store=new se({deps:[this.baseStore,this.fieldMetaDerived],fn:({prevDepVals:e,currDepVals:t,prevVal:i})=>{var r,n,s,a;const o=i,l=null==e?void 0:e[0],u=t[0],c=Object.values(u.fieldMetaBase),d=c.some((e=>null==e?void 0:e.isValidating)),f=!c.some((e=>{return(null==e?void 0:e.errorMap)&&(t=Object.values(e.errorMap).filter(Boolean),!(Array.isArray(t)&&0===t.length));var t})),p=c.some((e=>null==e?void 0:e.isTouched)),h=c.some((e=>null==e?void 0:e.isBlurred)),v=p&&(null==(r=null==u?void 0:u.errorMap)?void 0:r.onMount),m=c.some((e=>null==e?void 0:e.isDirty)),g=!m,y=Boolean((null==(n=u.errorMap)?void 0:n.onMount)||c.some((e=>{var t;return null==(t=null==e?void 0:e.errorMap)?void 0:t.onMount}))),b=!!d;let S=(null==o?void 0:o.errors)??[];l&&u.errorMap===l.errorMap||(S=Object.values(u.errorMap).reduce(((e,t)=>void 0===t?e:t&&be(t)?(e.push(t.form),e):(e.push(t),e)),[]));const M=0===S.length,w=f&&M,O=this.options.canSubmitWhenInvalid??!1,F=0===u.submissionAttempts&&!p&&!y||!b&&!u.isSubmitting&&w||O;let V=u.errorMap;if(v&&(S=S.filter((e=>e!==u.errorMap.onMount)),V=Object.assign(V,{onMount:void 0})),o&&l&&o.errorMap===V&&o.fieldMeta===this.fieldMetaDerived.state&&o.errors===S&&o.isFieldsValidating===d&&o.isFieldsValid===f&&o.isFormValid===M&&o.isValid===w&&o.canSubmit===F&&o.isTouched===p&&o.isBlurred===h&&o.isPristine===g&&o.isDirty===m&&Se(l,u))return o;let E={...u,errorMap:V,fieldMeta:this.fieldMetaDerived.state,errors:S,isFieldsValidating:d,isFieldsValid:f,isFormValid:M,isValid:w,canSubmit:F,isTouched:p,isBlurred:h,isPristine:g,isDirty:m};const D=(null==(s=this.options.transform)?void 0:s.deps)??[],j=D.length!==this.prevTransformArray.length||D.some(((e,t)=>e!==this.prevTransformArray[t]));if(j){const e=Object.assign({},this,{state:E});null==(a=this.options.transform)||a.fn(e),E=e.state,this.prevTransformArray=D}return E}}),this.handleSubmit=this.handleSubmit.bind(this),this.update(e||{})}get state(){return this.store.state}runValidator(e){return Oe(e.validate)?we[e.type](e.value,e.validate):e.validate(e.value)}async handleSubmit(e){var t,i,r,n,s,a;if(this.baseStore.setState((e=>({...e,isSubmitted:!1,submissionAttempts:e.submissionAttempts+1,isSubmitSuccessful:!1}))),re((()=>{Object.values(this.fieldInfo).forEach((e=>{e.instance&&(e.instance.state.meta.isTouched||e.instance.setMeta((e=>({...e,isTouched:!0}))))}))})),!this.state.canSubmit)return;this.baseStore.setState((e=>({...e,isSubmitting:!0})));const o=()=>{this.baseStore.setState((e=>({...e,isSubmitting:!1})))};if(await this.validateAllFields("submit"),!this.state.isFieldsValid)return o(),void(null==(i=(t=this.options).onSubmitInvalid)||i.call(t,{value:this.state.values,formApi:this}));if(await this.validate("submit"),!this.state.isValid)return o(),void(null==(n=(r=this.options).onSubmitInvalid)||n.call(r,{value:this.state.values,formApi:this}));re((()=>{Object.values(this.fieldInfo).forEach((e=>{var t,i,r;null==(r=null==(i=null==(t=e.instance)?void 0:t.options.listeners)?void 0:i.onSubmit)||r.call(i,{value:e.instance.state.value,fieldApi:e.instance})}))}));try{await(null==(a=(s=this.options).onSubmit)?void 0:a.call(s,{value:this.state.values,formApi:this,meta:e??this.options.onSubmitMeta})),re((()=>{this.baseStore.setState((e=>({...e,isSubmitted:!0,isSubmitSuccessful:!0}))),o()}))}catch(l){throw this.baseStore.setState((e=>({...e,isSubmitSuccessful:!1}))),o(),l}}setErrorMap(e){this.baseStore.setState((t=>({...t,errorMap:{...t.errorMap,...e}})))}}function je(e){if(e){if(be(e)){return{formError:je(e.form).formError,fieldErrors:e.fields}}return{formError:e}}return{formError:void 0}}function xe(e){switch(e){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";default:return"onChange"}}class Ae{constructor(e){this.options={},this.mount=()=>{var e,t;const i=this.store.mount();void 0!==this.options.defaultValue&&this.form.setFieldValue(this.name,this.options.defaultValue,{dontUpdateMeta:!0});this.getInfo().instance=this,this.update(this.options);const{onMount:r}=this.options.validators||{};if(r){const e=this.runValidator({validate:r,value:{value:this.state.value,fieldApi:this,validationSource:"field"},type:"validate"});e&&this.setMeta((t=>({...t,errorMap:{...null==t?void 0:t.errorMap,onMount:e}})))}return null==(t=null==(e=this.options.listeners)?void 0:e.onMount)||t.call(e,{value:this.state.value,fieldApi:this}),i},this.update=e=>{this.options=e;const t=this.name!==e.name;if(this.name=e.name,void 0===this.state.value){const i=oe(e.form.options.defaultValues,e.name),r=e.defaultValue??i;t?this.setValue((e=>e||r),{dontUpdateMeta:!0}):void 0!==r&&this.setValue(r,{dontUpdateMeta:!0})}void 0===this.form.getFieldMeta(this.name)&&this.setMeta(this.state.meta)},this.getValue=()=>this.form.getFieldValue(this.name),this.setValue=(e,t)=>{this.form.setFieldValue(this.name,e,t),this.triggerOnChangeListener(),this.validate("change")},this.getMeta=()=>this.store.state.meta,this.setMeta=e=>this.form.setFieldMeta(this.name,e),this.getInfo=()=>this.form.getFieldInfo(this.name),this.pushValue=(e,t)=>{this.form.pushFieldValue(this.name,e,t),this.triggerOnChangeListener()},this.insertValue=(e,t,i)=>{this.form.insertFieldValue(this.name,e,t,i),this.triggerOnChangeListener()},this.replaceValue=(e,t,i)=>{this.form.replaceFieldValue(this.name,e,t,i),this.triggerOnChangeListener()},this.removeValue=(e,t)=>{this.form.removeFieldValue(this.name,e,t),this.triggerOnChangeListener()},this.swapValues=(e,t,i)=>{this.form.swapFieldValues(this.name,e,t,i),this.triggerOnChangeListener()},this.moveValue=(e,t,i)=>{this.form.moveFieldValues(this.name,e,t,i),this.triggerOnChangeListener()},this.getLinkedFields=e=>{const t=Object.values(this.form.fieldInfo),i=[];for(const r of t){if(!r.instance)continue;const{onChangeListenTo:t,onBlurListenTo:n}=r.instance.options.validators||{};"change"===e&&(null==t?void 0:t.includes(this.name))&&i.push(r.instance),"blur"===e&&(null==n?void 0:n.includes(this.name))&&i.push(r.instance)}return i},this.validateSync=(e,t)=>{const i=ye(e,this.options),r=this.getLinkedFields(e).reduce(((t,i)=>{const r=ye(e,i.options);return r.forEach((e=>{e.field=i})),t.concat(r)}),[]);let n=!1;re((()=>{const e=(e,i)=>{const r=Pe(i.cause),s=i.validate?Ie(e.runValidator({validate:i.validate,value:{value:e.store.state.value,validationSource:"field",fieldApi:e},type:"validate"})):t[r];e.state.meta.errorMap[r]!==s&&e.setMeta((e=>({...e,errorMap:{...e.errorMap,[Pe(i.cause)]:s||t[r]}}))),(s||t[r])&&(n=!0)};for(const t of i)e(this,t);for(const t of r)t.validate&&e(t.field,t)}));const s=Pe("submit");return this.state.meta.errorMap[s]&&"submit"!==e&&!n&&this.setMeta((e=>({...e,errorMap:{...e.errorMap,[s]:void 0}}))),{hasErrored:n}},this.validateAsync=async(e,t)=>{const i=ge(e,this.options),r=await t,n=this.getLinkedFields(e),s=n.reduce(((t,i)=>{const r=ge(e,i.options);return r.forEach((e=>{e.field=i})),t.concat(r)}),[]);this.state.meta.isValidating||this.setMeta((e=>({...e,isValidating:!0})));for(const c of n)c.setMeta((e=>({...e,isValidating:!0})));const a=[],o=[],l=(e,t,i)=>{const n=Pe(t.cause),s=e.getInfo().validationMetaMap[n];null==s||s.lastAbortController.abort();const a=new AbortController;this.getInfo().validationMetaMap[n]={lastAbortController:a},i.push(new Promise((async i=>{var s;let o;try{o=await new Promise(((i,r)=>{this.timeoutIds.validations[t.cause]&&clearTimeout(this.timeoutIds.validations[t.cause]),this.timeoutIds.validations[t.cause]=setTimeout((async()=>{if(a.signal.aborted)return i(void 0);try{i(await this.runValidator({validate:t.validate,value:{value:e.store.state.value,fieldApi:e,signal:a.signal,validationSource:"field"},type:"validateAsync"}))}catch(G){r(G)}}),t.debounceMs)}))}catch(G){o=G}if(a.signal.aborted)return i(void 0);const l=Ie(o),u=null==(s=r[this.name])?void 0:s[n],c=l||u;e.setMeta((e=>({...e,errorMap:{...null==e?void 0:e.errorMap,[n]:c}}))),i(c)})))};for(const c of i)c.validate&&l(this,c,a);for(const c of s)c.validate&&l(c.field,c,o);let u=[];(a.length||o.length)&&(u=await Promise.all(a),await Promise.all(o)),this.setMeta((e=>({...e,isValidating:!1})));for(const c of n)c.setMeta((e=>({...e,isValidating:!1})));return u.filter(Boolean)},this.validate=(e,t)=>{var i;if(!this.state.meta.isTouched)return[];const{fieldsErrorMap:r}=(null==t?void 0:t.skipFormValidation)?{fieldsErrorMap:{}}:this.form.validateSync(e),{hasErrored:n}=this.validateSync(e,r[this.name]??{});if(n&&!this.options.asyncAlways)return null==(i=this.getInfo().validationMetaMap[Pe(e)])||i.lastAbortController.abort(),this.state.meta.errors;const s=(null==t?void 0:t.skipFormValidation)?Promise.resolve({}):this.form.validateAsync(e);return this.validateAsync(e,s)},this.handleChange=e=>{this.setValue(e)},this.handleBlur=()=>{this.state.meta.isTouched||(this.setMeta((e=>({...e,isTouched:!0}))),this.validate("change")),this.state.meta.isBlurred||this.setMeta((e=>({...e,isBlurred:!0}))),this.validate("blur"),this.triggerOnBlurListener()},this.parseValueWithSchema=e=>we.validate({value:this.state.value,validationSource:"field"},e),this.parseValueWithSchemaAsync=e=>we.validateAsync({value:this.state.value,validationSource:"field"},e),this.form=e.form,this.name=e.name,this.timeoutIds={validations:{},listeners:{}},this.store=new se({deps:[this.form.store],fn:()=>({value:this.form.getFieldValue(this.name),meta:this.form.getFieldMeta(this.name)??{...Fe,...e.defaultMeta}})}),this.options=e}get state(){return this.store.state}runValidator(e){return Oe(e.validate)?we[e.type](e.value,e.validate):e.validate(e.value)}setErrorMap(e){this.setMeta((t=>({...t,errorMap:{...t.errorMap,...e}})))}triggerOnBlurListener(){var e,t,i;const r=null==(e=this.options.listeners)?void 0:e.onBlurDebounceMs;r&&r>0?(this.timeoutIds.listeners.blur&&clearTimeout(this.timeoutIds.listeners.blur),this.timeoutIds.listeners.blur=setTimeout((()=>{var e,t;null==(t=null==(e=this.options.listeners)?void 0:e.onBlur)||t.call(e,{value:this.state.value,fieldApi:this})}),r)):null==(i=null==(t=this.options.listeners)?void 0:t.onBlur)||i.call(t,{value:this.state.value,fieldApi:this})}triggerOnChangeListener(){var e,t,i;const r=null==(e=this.options.listeners)?void 0:e.onChangeDebounceMs;r&&r>0?(this.timeoutIds.listeners.change&&clearTimeout(this.timeoutIds.listeners.change),this.timeoutIds.listeners.change=setTimeout((()=>{var e,t;null==(t=null==(e=this.options.listeners)?void 0:e.onChange)||t.call(e,{value:this.state.value,fieldApi:this})}),r)):null==(i=null==(t=this.options.listeners)?void 0:t.onChange)||i.call(t,{value:this.state.value,fieldApi:this})}}function Ie(e){if(e)return e}function Pe(e){switch(e){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";default:return"onChange"}}function ke(e){return e}var Be,Te,$e,Ce,Re={exports:{}},_e={},Le={exports:{}},We={};function ze(){return Te||(Te=1,Le.exports=function(){if(Be)return We;Be=1;var e=i(),t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=e.useState,n=e.useEffect,s=e.useLayoutEffect,a=e.useDebugValue;function o(e){var i=e.getSnapshot;e=e.value;try{var r=i();return!t(e,r)}catch(n){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var i=t(),l=r({inst:{value:i,getSnapshot:t}}),u=l[0].inst,c=l[1];return s((function(){u.value=i,u.getSnapshot=t,o(u)&&c({inst:u})}),[e,i,t]),n((function(){return o(u)&&c({inst:u}),e((function(){o(u)&&c({inst:u})}))}),[e]),a(i),i};return We.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:l,We}()),Le.exports}
/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ne=(Ce||(Ce=1,Re.exports=function(){if($e)return _e;$e=1;var e=i(),t=ze(),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=t.useSyncExternalStore,s=e.useRef,a=e.useEffect,o=e.useMemo,l=e.useDebugValue;return _e.useSyncExternalStoreWithSelector=function(e,t,i,u,c){var d=s(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;d=o((function(){function e(e){if(!a){if(a=!0,n=e,e=u(e),void 0!==c&&f.hasValue){var t=f.value;if(c(t,e))return s=t}return s=e}if(t=s,r(n,e))return t;var i=u(e);return void 0!==c&&c(t,i)?(n=e,t):(n=e,s=i)}var n,s,a=!1,o=void 0===i?null:i;return[function(){return e(t())},null===o?void 0:function(){return e(o())}]}),[t,i,u,c]);var p=n(e,d[0],d[1]);return a((function(){f.hasValue=!0,f.value=p}),[p]),l(p),p},_e}()),Re.exports);function Ge(e,t=e=>e){return Ne.useSyncExternalStoreWithSelector(e.subscribe,(()=>e.state),(()=>e.state),t,Ue)}function Ue(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,r]of e)if(!t.has(i)||!Object.is(r,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!1;for(let r=0;r<i.length;r++)if(!Object.prototype.hasOwnProperty.call(t,i[r])||!Object.is(e[i[r]],t[i[r]]))return!1;return!0}const He="undefined"!=typeof window?e.useLayoutEffect:e.useEffect;const Ke=({children:t,...i})=>{const n=function(t){const[i]=e.useState((()=>{const e=new Ae({...t,form:t.form,name:t.name});return e.Field=Ke,e}));return He(i.mount,[i]),He((()=>{i.update(t)})),Ge(i.store,"array"===t.mode?e=>[e.meta,Object.keys(e.value??[]).length]:void 0),i}(i),s=e.useMemo((()=>ae(t,n)),[t,n,n.state.value,n.state.meta]);return r.jsx(r.Fragment,{children:s})};function Ze({form:e,selector:t,children:i}){return ae(i,Ge(e.store,t))}function qe(){const t=e.createContext(null);const i=e.createContext(null);return{fieldContext:t,useFieldContext:function(){const i=e.useContext(t);if(!i)throw new Error("`fieldContext` only works when within a `fieldComponent` passed to `createFormHook`");return i},useFormContext:function(){const t=e.useContext(i);if(!t)throw new Error("`formContext` only works when within a `formComponent` passed to `createFormHook`");return t},formContext:i}}function Je({fieldComponents:t,fieldContext:i,formContext:n,formComponents:s}){return{useAppForm:function(a){const o=function(t){const[i]=e.useState((()=>{const e=new De(t),i=e;return i.Field=function(t){return r.jsx(Ke,{...t,form:e})},i.Subscribe=t=>r.jsx(Ze,{form:e,selector:t.selector,children:t.children}),i}));return He(i.mount,[]),Ge(i.store,(e=>e.isSubmitting)),He((()=>{i.update(t)})),i}(a),l=e.useMemo((()=>({children:e})=>r.jsx(n.Provider,{value:o,children:e})),[o]),u=e.useMemo((()=>({children:e,...n})=>r.jsx(o.Field,{...n,children:n=>r.jsx(i.Provider,{value:n,children:e(Object.assign(n,t))})})),[o]);return e.useMemo((()=>Object.assign(o,{AppField:u,AppForm:l,...s})),[o,u,l])},withForm:function({render:e,props:t}){return i=>e({...t,...i})}}}export{qe as a,Je as c,ke as f,U as u,w as x};
//# sourceMappingURL=vendor-forms-Dm5uatUg.js.map
